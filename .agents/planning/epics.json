{
  "_metadata": {
    "agentType": "planning",
    "taskId": "28b6c823428d826b814affbe",
    "timestamp": "2026-01-23T00:12:18.497Z",
    "phase": "planning",
    "savedAt": "2026-01-23T00:12:18.497Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "fn",
    "taskDescription": "Completar App Pasos Flutter - Merge PRs pendientes y Epics faltantes ## Contexto La task anterior (25044f1f7f2c32e9d29cf33f) fue interrumpida dejando trabajo parcial. Hay 3 PRs APROBADOS por el Judge pendientes de merge y 2 epics sin empezar. Repositorio: https://github.com/devwspito/app-pasos-frontend-flutter ## Estado Actual en Main - ✅ Flutter Foundation (DI, API client, storage, error handling) - ✅ UI Foundation (Material 3 theme, go_router, widgets base) - ✅ Authentication UI (login, register, forgot password, providers) - ✅ Dashboard parcial (models, entities básicos) ## PRs Pendientes de Merge (YA APROBADOS) 1. PR #6: Flutter Platform Setup (iOS/Android config, pubspec.yaml) 2. PR #7: Dashboard & Step Tracking Completion (datasources, repository, widgets, charts) 3. PR #8: Sharing & Friends UI (friend list, share requests, comparisons) ## Trabajo Pendiente ### 1. Merge PRs Aprobados (Prioridad Máxima) - Mergear PR #6, #7, #8 a main en orden ### 2. Goals & Groups UI (Epic en progreso) La rama epic/d29cf33f-epic-goals-groups-ui-1mx8rc tiene trabajo parcial. Completar: - Goals domain layer (entities, repositories, use cases) - Goals data layer (models, datasources, repository impl) - Goals presentation (screens, widgets, Riverpod providers) - Groups functionality (crear/unirse grupos, rankings) - Crear PR y mergear ### 3. Native Health API Integration (Epic nuevo) - Configurar permisos HealthKit (iOS Info.plist) - Configurar permisos Health Connect (Android manifest) - Crear HealthService con abstracción multiplataforma - Implementar sincronización automática de pasos - Background fetch para actualizaciones periódicas ### 4. Real-Time WebSocket Client (Epic nuevo) - Cliente Socket.io para conexión con backend - Handlers para eventos de pasos en tiempo real - Sincronización bidireccional de datos - Reconexión automática y manejo de offline - Notificaciones push de actividad de amigos ## Stack - Flutter 3.x con Clean Architecture - Riverpod para state management - go_router para navegación - fl_chart para gráficos - health package para HealthKit/Health Connect - socket_io_client para WebSockets ## Notas - El backend ya tiene Socket.io implementado (repo: project-app-pasos-backend) - Coordinar endpoints con backend para health sync",
    "epicsCount": 5,
    "epics": [
      {
        "id": "epic-goals-groups-ui",
        "title": "Goals & Groups UI - Complete Feature",
        "description": "Complete the Goals & Groups feature by merging partial work from epic branch and adding presentation layer screens and widgets. Domain and data layers exist in branch.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/constants/api_endpoints.dart",
          "lib/app.dart"
        ],
        "filesToCreate": [
          "lib/features/goals/presentation/screens/goals_list_screen.dart",
          "lib/features/goals/presentation/screens/goal_details_screen.dart",
          "lib/features/goals/presentation/screens/create_goal_screen.dart",
          "lib/features/goals/presentation/widgets/goal_card.dart",
          "lib/features/goals/presentation/widgets/goal_progress_indicator.dart",
          "lib/features/goals/presentation/widgets/member_list_tile.dart",
          "lib/features/goals/presentation/widgets/invite_member_dialog.dart"
        ],
        "filesToRead": [
          "lib/features/steps/presentation/providers/steps_provider.dart",
          "lib/features/steps/presentation/providers/steps_state.dart",
          "lib/features/auth/presentation/screens/login_screen.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Uses existing Riverpod StateNotifier pattern from steps_provider",
          "Follows screen/widget separation from auth feature",
          "Uses AppCard, AppButton from shared widgets"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-sharing-friends-ui",
        "title": "Sharing & Friends UI - Full Implementation",
        "description": "Implement complete Sharing & Friends feature following Clean Architecture. Includes domain entities, data layer with API integration, and presentation layer with screens and widgets.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/constants/api_endpoints.dart",
          "lib/app.dart"
        ],
        "filesToCreate": [
          "lib/features/sharing/domain/entities/sharing_relationship.dart",
          "lib/features/sharing/domain/entities/friend_stats.dart",
          "lib/features/sharing/domain/repositories/sharing_repository.dart",
          "lib/features/sharing/domain/usecases/send_friend_request_usecase.dart",
          "lib/features/sharing/domain/usecases/accept_request_usecase.dart",
          "lib/features/sharing/domain/usecases/get_friends_usecase.dart",
          "lib/features/sharing/domain/usecases/get_friend_stats_usecase.dart",
          "lib/features/sharing/data/models/sharing_relationship_model.dart",
          "lib/features/sharing/data/models/friend_stats_model.dart",
          "lib/features/sharing/data/datasources/sharing_remote_data_source.dart",
          "lib/features/sharing/data/repositories/sharing_repository_impl.dart",
          "lib/features/sharing/presentation/providers/sharing_provider.dart",
          "lib/features/sharing/presentation/providers/sharing_state.dart",
          "lib/features/sharing/presentation/screens/friends_list_screen.dart",
          "lib/features/sharing/presentation/screens/friend_requests_screen.dart",
          "lib/features/sharing/presentation/screens/friend_comparison_screen.dart",
          "lib/features/sharing/presentation/widgets/friend_card.dart",
          "lib/features/sharing/presentation/widgets/friend_request_tile.dart",
          "lib/features/sharing/presentation/widgets/comparison_chart.dart"
        ],
        "filesToRead": [
          "lib/features/steps/domain/entities/step_stats.dart",
          "lib/features/steps/data/datasources/steps_remote_data_source.dart",
          "lib/features/steps/presentation/providers/steps_provider.dart",
          "project-app-pasos-backend/src/routes/sharing.routes.ts"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-goals-groups-ui"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture: domain -> data -> presentation",
          "Riverpod StateNotifier pattern",
          "API endpoints from sharing.routes.ts"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-health-api-integration",
        "title": "Native Health API Integration",
        "description": "Implement native health data integration using the health package. Configure platform permissions for HealthKit (iOS) and Health Connect (Android). Create abstraction layer for cross-platform health data access.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "lib/core/di/injection_container.dart",
          "lib/features/steps/presentation/providers/steps_provider.dart"
        ],
        "filesToCreate": [
          "ios/Runner/Info.plist.health",
          "android/app/src/main/AndroidManifest.xml.health",
          "lib/core/services/health_service.dart",
          "lib/core/services/health_service_impl.dart",
          "lib/features/steps/data/datasources/health_local_data_source.dart",
          "lib/features/steps/domain/usecases/sync_health_steps_usecase.dart",
          "lib/features/steps/presentation/providers/health_sync_provider.dart"
        ],
        "filesToRead": [
          "lib/features/steps/domain/repositories/steps_repository.dart",
          "lib/features/steps/domain/usecases/record_steps_usecase.dart",
          "lib/core/storage/local_storage.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-goals-groups-ui"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Service abstraction pattern from ApiClient",
          "Repository pattern for data access",
          "UseCase pattern for business logic"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-websocket-realtime-client",
        "title": "Real-Time WebSocket Client",
        "description": "Implement Socket.io client for real-time step synchronization with backend. Handle connection lifecycle, automatic reconnection, and offline state. Integrate with Riverpod for reactive state management.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "lib/core/di/injection_container.dart",
          "lib/features/steps/presentation/providers/steps_provider.dart"
        ],
        "filesToCreate": [
          "lib/core/services/socket_service.dart",
          "lib/core/services/socket_service_impl.dart",
          "lib/core/services/socket_event_types.dart",
          "lib/features/steps/presentation/providers/realtime_steps_provider.dart",
          "lib/features/goals/presentation/providers/realtime_goals_provider.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/socket/index.ts",
          "project-app-pasos-backend/src/socket/types.ts",
          "project-app-pasos-backend/src/socket/handlers/goals.handler.ts",
          "lib/core/storage/secure_storage.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-goals-groups-ui",
          "epic-goals-groups-ui",
          "epic-health-api-integration"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Singleton service pattern",
          "Riverpod provider for reactive state",
          "Event types matching backend socket/types.ts"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-platform-setup-merge",
        "title": "Flutter Platform Configuration",
        "description": "Configure iOS and Android platform settings including build configurations, app icons, splash screens, and signing configurations. Note: PR #6 contains only metadata, actual platform files need implementation.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "ios/Runner/Info.plist",
          "android/app/build.gradle",
          "android/app/src/main/AndroidManifest.xml"
        ],
        "filesToCreate": [
          "ios/Runner/Assets.xcassets/AppIcon.appiconset/Contents.json",
          "android/app/src/main/res/values/strings.xml",
          "lib/core/config/app_config.dart",
          "lib/core/config/environment.dart"
        ],
        "filesToRead": [
          "pubspec.yaml"
        ],
        "estimatedComplexity": "simple",
        "dependencies": [
          "epic-health-api-integration"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Standard Flutter platform configuration",
          "Environment-based configuration pattern"
        ],
        "repoType": "frontend"
      }
    ]
  }
}