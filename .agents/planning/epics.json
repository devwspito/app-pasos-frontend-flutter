{
  "_metadata": {
    "agentType": "planning",
    "taskId": "4779e64c71a87c9df959194c",
    "timestamp": "2026-01-25T15:41:58.555Z",
    "phase": "planning",
    "savedAt": "2026-01-25T15:41:58.556Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "FN441",
    "taskDescription": "Descripción de tareas para completar el frontend en Flutter\n\nCompletar los 7 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nEl frontend debe ir en: project-app-pasos-frontend-flutter (crear nueva estructura)\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nUI FOUNDATION\n\nSistema de diseño con Material Design 3\n\nRouting y navegación (go_router)\n\nTema oscuro/claro (ThemeData)\n\nWidgets reutilizables\n\nAUTH UI\n\nPantallas de login, registro y recuperación de contraseña\n\nGestión de estado de autenticación\n\nAlmacenamiento seguro de tokens (flutter_secure_storage)\n\nDASHBOARD\n\nVista principal con contador de pasos\n\nHistorial de actividad\n\nGráficos (fl_chart o charts_flutter)\n\nPull-to-refresh\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)\n\nManejo de reconexión",
    "epicsCount": 7,
    "epics": [
      {
        "id": "epic-ui-foundation",
        "title": "UI Foundation - Design System and Navigation",
        "description": "Establish the foundational UI infrastructure including Material Design 3 theming, navigation system with go_router, reusable widgets, and core presentation utilities",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/constants/app_constants.dart"
        ],
        "filesToCreate": [
          "lib/main.dart",
          "lib/app.dart",
          "lib/core/theme/app_theme.dart",
          "lib/core/theme/app_colors.dart",
          "lib/core/theme/app_typography.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/di/injection_container.dart",
          "lib/core/widgets/app_button.dart",
          "lib/core/widgets/app_text_field.dart",
          "lib/core/widgets/app_card.dart",
          "lib/core/widgets/app_loading.dart",
          "lib/core/widgets/app_error.dart",
          "lib/core/widgets/app_empty_state.dart",
          "lib/core/widgets/app_avatar.dart",
          "lib/core/widgets/app_bottom_nav.dart",
          "lib/core/utils/validators.dart",
          "lib/core/utils/formatters.dart",
          "lib/core/utils/extensions.dart",
          "lib/core/network/api_client.dart",
          "lib/core/network/api_interceptors.dart",
          "lib/core/network/network_info.dart",
          "lib/core/error/failures.dart",
          "lib/core/error/exceptions.dart"
        ],
        "filesToRead": [
          "lib/core/constants/api_endpoints.dart",
          "lib/env/env_config.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Uses abstract final class pattern from existing code",
          "Follows snake_case file naming convention",
          "Uses get_it for DI as specified in pubspec.yaml"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-auth-ui",
        "title": "Auth UI - Authentication Screens and State Management",
        "description": "Implement complete authentication flow including login, registration, password recovery screens, secure token storage, and auth state management with automatic token refresh",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [],
        "filesToCreate": [
          "lib/features/auth/data/datasources/auth_remote_datasource.dart",
          "lib/features/auth/data/datasources/auth_local_datasource.dart",
          "lib/features/auth/data/models/user_model.dart",
          "lib/features/auth/data/models/auth_tokens_model.dart",
          "lib/features/auth/data/repositories/auth_repository_impl.dart",
          "lib/features/auth/domain/entities/user.dart",
          "lib/features/auth/domain/entities/auth_tokens.dart",
          "lib/features/auth/domain/repositories/auth_repository.dart",
          "lib/features/auth/domain/usecases/login.dart",
          "lib/features/auth/domain/usecases/register.dart",
          "lib/features/auth/domain/usecases/logout.dart",
          "lib/features/auth/domain/usecases/refresh_token.dart",
          "lib/features/auth/domain/usecases/get_current_user.dart",
          "lib/features/auth/presentation/bloc/auth_bloc.dart",
          "lib/features/auth/presentation/bloc/auth_event.dart",
          "lib/features/auth/presentation/bloc/auth_state.dart",
          "lib/features/auth/presentation/pages/login_page.dart",
          "lib/features/auth/presentation/pages/register_page.dart",
          "lib/features/auth/presentation/pages/forgot_password_page.dart",
          "lib/features/auth/presentation/pages/splash_page.dart",
          "lib/features/auth/presentation/widgets/auth_form.dart",
          "lib/features/auth/presentation/widgets/password_field.dart",
          "lib/features/auth/presentation/widgets/social_login_buttons.dart"
        ],
        "filesToRead": [
          "lib/core/constants/api_endpoints.dart",
          "lib/core/constants/app_constants.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-ui-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Uses ApiEndpoints.login, ApiEndpoints.register constants",
          "Follows feature-first folder structure",
          "Uses dartz Either for error handling"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-dashboard",
        "title": "Dashboard - Step Counter and Activity History",
        "description": "Build the main dashboard with real-time step counter display, daily/weekly/monthly charts using fl_chart, activity history list with pull-to-refresh, and step statistics summary",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [],
        "filesToCreate": [
          "lib/features/dashboard/data/datasources/steps_remote_datasource.dart",
          "lib/features/dashboard/data/models/step_model.dart",
          "lib/features/dashboard/data/models/step_stats_model.dart",
          "lib/features/dashboard/data/models/weekly_trend_model.dart",
          "lib/features/dashboard/data/models/hourly_peaks_model.dart",
          "lib/features/dashboard/data/repositories/steps_repository_impl.dart",
          "lib/features/dashboard/domain/entities/step_record.dart",
          "lib/features/dashboard/domain/entities/step_stats.dart",
          "lib/features/dashboard/domain/entities/weekly_trend.dart",
          "lib/features/dashboard/domain/entities/hourly_peaks.dart",
          "lib/features/dashboard/domain/repositories/steps_repository.dart",
          "lib/features/dashboard/domain/usecases/get_today_steps.dart",
          "lib/features/dashboard/domain/usecases/get_weekly_trend.dart",
          "lib/features/dashboard/domain/usecases/get_hourly_peaks.dart",
          "lib/features/dashboard/domain/usecases/get_stats.dart",
          "lib/features/dashboard/domain/usecases/record_steps.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_bloc.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_event.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_state.dart",
          "lib/features/dashboard/presentation/pages/dashboard_page.dart",
          "lib/features/dashboard/presentation/widgets/step_counter_card.dart",
          "lib/features/dashboard/presentation/widgets/weekly_chart.dart",
          "lib/features/dashboard/presentation/widgets/hourly_chart.dart",
          "lib/features/dashboard/presentation/widgets/activity_list.dart",
          "lib/features/dashboard/presentation/widgets/stats_summary.dart",
          "lib/features/dashboard/presentation/widgets/progress_ring.dart"
        ],
        "filesToRead": [
          "lib/core/constants/api_endpoints.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Uses ApiEndpoints.steps, stepStats, stepHistory constants",
          "Maps to backend routes: GET /steps/today, /steps/weekly, /steps/hourly-peaks, /steps/stats"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-sharing-ui",
        "title": "Sharing UI - Friends and Social Features",
        "description": "Implement friend management with search, friend requests, sharing controls, and friend activity feed showing shared step data from connected users",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [],
        "filesToCreate": [
          "lib/features/sharing/data/datasources/sharing_remote_datasource.dart",
          "lib/features/sharing/data/datasources/users_remote_datasource.dart",
          "lib/features/sharing/data/models/sharing_relationship_model.dart",
          "lib/features/sharing/data/models/user_search_model.dart",
          "lib/features/sharing/data/models/shared_user_stats_model.dart",
          "lib/features/sharing/data/repositories/sharing_repository_impl.dart",
          "lib/features/sharing/data/repositories/users_repository_impl.dart",
          "lib/features/sharing/domain/entities/sharing_relationship.dart",
          "lib/features/sharing/domain/entities/friend.dart",
          "lib/features/sharing/domain/entities/shared_user_stats.dart",
          "lib/features/sharing/domain/repositories/sharing_repository.dart",
          "lib/features/sharing/domain/repositories/users_repository.dart",
          "lib/features/sharing/domain/usecases/send_friend_request.dart",
          "lib/features/sharing/domain/usecases/accept_request.dart",
          "lib/features/sharing/domain/usecases/reject_request.dart",
          "lib/features/sharing/domain/usecases/revoke_sharing.dart",
          "lib/features/sharing/domain/usecases/get_relationships.dart",
          "lib/features/sharing/domain/usecases/get_shared_user_stats.dart",
          "lib/features/sharing/domain/usecases/search_users.dart",
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/sharing/presentation/bloc/sharing_event.dart",
          "lib/features/sharing/presentation/bloc/sharing_state.dart",
          "lib/features/sharing/presentation/bloc/user_search_bloc.dart",
          "lib/features/sharing/presentation/pages/friends_page.dart",
          "lib/features/sharing/presentation/pages/friend_requests_page.dart",
          "lib/features/sharing/presentation/pages/user_search_page.dart",
          "lib/features/sharing/presentation/pages/friend_activity_page.dart",
          "lib/features/sharing/presentation/widgets/friend_list_item.dart",
          "lib/features/sharing/presentation/widgets/friend_request_card.dart",
          "lib/features/sharing/presentation/widgets/user_search_result.dart",
          "lib/features/sharing/presentation/widgets/friend_stats_card.dart"
        ],
        "filesToRead": [
          "lib/core/constants/api_endpoints.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Maps to backend: POST /sharing/request, PUT /sharing/:id/accept, GET /sharing, GET /sharing/:userId/stats",
          "Uses ApiEndpoints constants for all API calls"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-goals-ui",
        "title": "Goals UI - Group Goals and Challenges",
        "description": "Build the goals feature with group creation, member invitations, progress tracking with leaderboards, and goal completion celebrations",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [],
        "filesToCreate": [
          "lib/features/goals/data/datasources/goals_remote_datasource.dart",
          "lib/features/goals/data/models/group_goal_model.dart",
          "lib/features/goals/data/models/goal_membership_model.dart",
          "lib/features/goals/data/models/goal_progress_model.dart",
          "lib/features/goals/data/repositories/goals_repository_impl.dart",
          "lib/features/goals/domain/entities/group_goal.dart",
          "lib/features/goals/domain/entities/goal_membership.dart",
          "lib/features/goals/domain/entities/goal_progress.dart",
          "lib/features/goals/domain/entities/member_contribution.dart",
          "lib/features/goals/domain/repositories/goals_repository.dart",
          "lib/features/goals/domain/usecases/create_goal.dart",
          "lib/features/goals/domain/usecases/get_user_goals.dart",
          "lib/features/goals/domain/usecases/get_goal_details.dart",
          "lib/features/goals/domain/usecases/invite_user.dart",
          "lib/features/goals/domain/usecases/join_goal.dart",
          "lib/features/goals/domain/usecases/leave_goal.dart",
          "lib/features/goals/domain/usecases/get_goal_progress.dart",
          "lib/features/goals/presentation/bloc/goals_bloc.dart",
          "lib/features/goals/presentation/bloc/goals_event.dart",
          "lib/features/goals/presentation/bloc/goals_state.dart",
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart",
          "lib/features/goals/presentation/pages/goals_list_page.dart",
          "lib/features/goals/presentation/pages/goal_detail_page.dart",
          "lib/features/goals/presentation/pages/create_goal_page.dart",
          "lib/features/goals/presentation/pages/invite_members_page.dart",
          "lib/features/goals/presentation/widgets/goal_card.dart",
          "lib/features/goals/presentation/widgets/goal_progress_bar.dart",
          "lib/features/goals/presentation/widgets/member_ranking_list.dart",
          "lib/features/goals/presentation/widgets/goal_completion_dialog.dart",
          "lib/features/goals/presentation/widgets/invite_user_sheet.dart"
        ],
        "filesToRead": [
          "lib/core/constants/api_endpoints.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-sharing-ui"
        ],
        "executionOrder": 4,
        "followsPatterns": [
          "Maps to backend: POST /goals, GET /goals, GET /goals/:id, POST /goals/:id/invite, PUT /goals/:id/join",
          "Uses ApiEndpoints.goals, activeGoals, goalProgress constants"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-native-integration",
        "title": "Native Integration - Health Data and Background Sync",
        "description": "Integrate with native health APIs (HealthKit on iOS, Health Connect on Android) for automatic step reading, implement background sync service, and handle permission flows",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/platform/health_permissions.dart",
          "lib/core/platform/platform_config.dart"
        ],
        "filesToCreate": [
          "lib/features/health/data/datasources/health_local_datasource.dart",
          "lib/features/health/data/models/health_step_model.dart",
          "lib/features/health/data/repositories/health_repository_impl.dart",
          "lib/features/health/domain/entities/health_step.dart",
          "lib/features/health/domain/repositories/health_repository.dart",
          "lib/features/health/domain/usecases/get_today_health_steps.dart",
          "lib/features/health/domain/usecases/get_step_history.dart",
          "lib/features/health/domain/usecases/request_health_permissions.dart",
          "lib/features/health/domain/usecases/check_health_permissions.dart",
          "lib/features/health/presentation/bloc/health_bloc.dart",
          "lib/features/health/presentation/bloc/health_event.dart",
          "lib/features/health/presentation/bloc/health_state.dart",
          "lib/features/health/presentation/pages/health_permissions_page.dart",
          "lib/features/health/presentation/pages/health_settings_page.dart",
          "lib/features/health/presentation/widgets/permission_request_card.dart",
          "lib/features/health/presentation/widgets/health_status_indicator.dart",
          "lib/features/health/services/health_sync_service.dart",
          "lib/features/health/services/background_sync_service.dart",
          "lib/features/health/services/step_aggregator.dart",
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "filesToRead": [
          "lib/core/platform/health_permissions.dart",
          "lib/core/platform/platform_config.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-dashboard"
        ],
        "executionOrder": 4,
        "followsPatterns": [
          "Uses existing HealthPermissions class pattern",
          "Uses PlatformConfig for platform detection",
          "Uses health package already in pubspec.yaml"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-realtime-client",
        "title": "Real-Time Client - WebSocket and Push Notifications",
        "description": "Implement WebSocket client for real-time step updates and goal progress, Firebase Cloud Messaging for push notifications, and robust reconnection handling for mobile networks",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart"
        ],
        "filesToCreate": [
          "lib/core/realtime/socket_client.dart",
          "lib/core/realtime/socket_events.dart",
          "lib/core/realtime/socket_types.dart",
          "lib/core/realtime/reconnection_manager.dart",
          "lib/features/realtime/data/datasources/socket_datasource.dart",
          "lib/features/realtime/data/models/steps_updated_model.dart",
          "lib/features/realtime/data/models/goal_progress_model.dart",
          "lib/features/realtime/data/repositories/realtime_repository_impl.dart",
          "lib/features/realtime/domain/entities/realtime_event.dart",
          "lib/features/realtime/domain/repositories/realtime_repository.dart",
          "lib/features/realtime/domain/usecases/connect_socket.dart",
          "lib/features/realtime/domain/usecases/disconnect_socket.dart",
          "lib/features/realtime/domain/usecases/emit_steps_update.dart",
          "lib/features/realtime/domain/usecases/emit_goal_progress.dart",
          "lib/features/realtime/domain/usecases/subscribe_to_goal.dart",
          "lib/features/realtime/presentation/bloc/realtime_bloc.dart",
          "lib/features/realtime/presentation/bloc/realtime_event.dart",
          "lib/features/realtime/presentation/bloc/realtime_state.dart",
          "lib/features/notifications/services/fcm_service.dart",
          "lib/features/notifications/services/notification_handler.dart",
          "lib/features/notifications/services/local_notification_service.dart",
          "lib/features/notifications/presentation/bloc/notifications_bloc.dart",
          "lib/features/notifications/presentation/pages/notification_settings_page.dart",
          "lib/features/notifications/presentation/widgets/notification_permission_dialog.dart"
        ],
        "filesToRead": [
          "lib/env/env_config.dart",
          "lib/core/constants/api_endpoints.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-dashboard",
          "epic-goals-ui",
          "epic-ui-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Maps to backend socket events: steps-updated, goal-progress, sharing:joined, goal:joined",
          "Uses web_socket_channel for WebSocket connection",
          "Uses firebase_messaging for push notifications"
        ],
        "repoType": "frontend"
      }
    ]
  }
}