{
  "_metadata": {
    "agentType": "planning",
    "taskId": "c9dcfbbdd18341688986b41a",
    "timestamp": "2026-01-28T09:42:48.118Z",
    "phase": "planning",
    "savedAt": "2026-01-28T09:42:48.118Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "TASK mvp pasos",
    "taskDescription": "Descripción de tareas para completar el frontend en Flutter\n\nCompletar los 6 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android/web)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)",
    "epicsCount": 5,
    "epics": [
      {
        "id": "epic-native-health-integration",
        "title": "Native Health Integration with HealthKit and Health Connect",
        "description": "Implement native pedometer integration using health package to read step data from HealthKit (iOS) and Health Connect (Android), with background sync capability",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_bloc.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_event.dart",
          "lib/features/dashboard/domain/repositories/steps_repository.dart",
          "lib/features/dashboard/data/repositories/steps_repository_impl.dart",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/features/health/domain/entities/health_data.dart",
          "lib/features/health/domain/entities/step_sample.dart",
          "lib/features/health/domain/repositories/health_repository.dart",
          "lib/features/health/domain/usecases/get_steps_from_health_usecase.dart",
          "lib/features/health/domain/usecases/request_health_permissions_usecase.dart",
          "lib/features/health/domain/usecases/sync_steps_background_usecase.dart",
          "lib/features/health/data/datasources/health_local_datasource.dart",
          "lib/features/health/data/repositories/health_repository_impl.dart",
          "lib/features/health/data/models/health_data_model.dart",
          "lib/features/health/data/models/step_sample_model.dart",
          "lib/features/health/presentation/bloc/health_bloc.dart",
          "lib/features/health/presentation/bloc/health_event.dart",
          "lib/features/health/presentation/bloc/health_state.dart",
          "lib/features/health/presentation/widgets/health_permission_dialog.dart",
          "lib/features/health/presentation/widgets/health_sync_indicator.dart",
          "lib/core/services/background_sync_service.dart"
        ],
        "filesToRead": [
          "lib/features/dashboard/domain/repositories/steps_repository.dart",
          "lib/features/dashboard/data/datasources/steps_remote_datasource.dart",
          "lib/core/di/injection_container.dart",
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "estimatedComplexity": "high",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Clean Architecture with data/domain/presentation layers",
          "BLoC pattern matching existing health feature",
          "Repository pattern with local datasource for health data",
          "Use case pattern for business logic"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-realtime-websocket-client",
        "title": "Real-time WebSocket Client for Live Updates",
        "description": "Implement WebSocket client using web_socket_channel to connect with Socket.io backend, enabling real-time step updates between friends and live goal progress tracking",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/network/api_endpoints.dart",
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/sharing/presentation/bloc/sharing_event.dart",
          "lib/features/sharing/presentation/bloc/sharing_state.dart",
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart",
          "lib/features/goals/presentation/bloc/goal_detail_event.dart",
          "lib/features/goals/presentation/bloc/goal_detail_state.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_bloc.dart",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/features/realtime/domain/entities/socket_event.dart",
          "lib/features/realtime/domain/entities/steps_updated_payload.dart",
          "lib/features/realtime/domain/entities/goal_progress_payload.dart",
          "lib/features/realtime/domain/repositories/realtime_repository.dart",
          "lib/features/realtime/domain/usecases/connect_socket_usecase.dart",
          "lib/features/realtime/domain/usecases/disconnect_socket_usecase.dart",
          "lib/features/realtime/domain/usecases/emit_steps_updated_usecase.dart",
          "lib/features/realtime/domain/usecases/emit_goal_progress_usecase.dart",
          "lib/features/realtime/data/datasources/socket_datasource.dart",
          "lib/features/realtime/data/repositories/realtime_repository_impl.dart",
          "lib/features/realtime/data/models/socket_event_model.dart",
          "lib/features/realtime/data/models/steps_updated_model.dart",
          "lib/features/realtime/data/models/goal_progress_model.dart",
          "lib/features/realtime/presentation/bloc/realtime_bloc.dart",
          "lib/features/realtime/presentation/bloc/realtime_event.dart",
          "lib/features/realtime/presentation/bloc/realtime_state.dart",
          "lib/core/network/socket_client.dart",
          "lib/core/network/socket_interceptors.dart"
        ],
        "filesToRead": [
          "lib/core/network/api_client.dart",
          "lib/core/storage/secure_storage_service.dart",
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart"
        ],
        "estimatedComplexity": "high",
        "dependencies": [
          "epic-native-health-integration"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture for realtime feature",
          "Socket client follows ApiClient pattern",
          "BLoC integration with stream subscriptions",
          "Event-driven updates matching backend Socket.io events"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-sharing-ui-realtime-integration",
        "title": "Sharing UI Real-time Integration",
        "description": "Integrate real-time WebSocket updates into the existing Sharing feature to display live step counts from friends and instant notification of friend activity",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/sharing/presentation/bloc/sharing_event.dart",
          "lib/features/sharing/presentation/bloc/sharing_state.dart",
          "lib/features/sharing/presentation/pages/friends_list_page.dart",
          "lib/features/sharing/presentation/pages/friend_activity_page.dart",
          "lib/features/sharing/presentation/widgets/friend_card.dart",
          "lib/features/sharing/presentation/widgets/friend_stats_card.dart",
          "lib/core/di/injection_container.dart"
        ],
        "filesToCreate": [
          "lib/features/sharing/presentation/widgets/live_step_indicator.dart",
          "lib/features/sharing/presentation/widgets/friend_activity_stream.dart"
        ],
        "filesToRead": [
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/sharing/presentation/pages/friends_list_page.dart",
          "lib/features/sharing/domain/entities/friend_stats.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-realtime-websocket-client",
          "epic-native-health-integration",
          "epic-realtime-websocket-client"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "BLoC stream subscription for real-time events",
          "Widget composition for live indicators",
          "Existing SharingBloc event/state pattern"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-goals-ui-realtime-integration",
        "title": "Goals UI Real-time Progress Integration",
        "description": "Integrate real-time WebSocket updates into the existing Goals feature to display live progress from all group members and instant ranking updates",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart",
          "lib/features/goals/presentation/bloc/goal_detail_event.dart",
          "lib/features/goals/presentation/bloc/goal_detail_state.dart",
          "lib/features/goals/presentation/pages/goal_detail_page.dart",
          "lib/features/goals/presentation/pages/goal_rankings_page.dart",
          "lib/features/goals/presentation/widgets/goal_progress_indicator.dart",
          "lib/features/goals/presentation/widgets/member_contribution_tile.dart",
          "lib/features/goals/presentation/widgets/ranking_list_item.dart",
          "lib/core/di/injection_container.dart"
        ],
        "filesToCreate": [
          "lib/features/goals/presentation/widgets/live_progress_indicator.dart",
          "lib/features/goals/presentation/widgets/live_ranking_badge.dart"
        ],
        "filesToRead": [
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart",
          "lib/features/goals/presentation/pages/goal_detail_page.dart",
          "lib/features/goals/domain/entities/goal_progress.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-realtime-websocket-client",
          "epic-native-health-integration",
          "epic-realtime-websocket-client"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "BLoC stream subscription for goal progress events",
          "Animated widget updates for live progress",
          "Existing GoalDetailBloc event/state pattern"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-push-notifications",
        "title": "Push Notifications with Firebase Messaging",
        "description": "Implement push notifications using firebase_messaging to alert users of friend activity, goal achievements, and friend requests even when app is in background",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "android/app/build.gradle",
          "ios/Runner/AppDelegate.swift",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/features/notifications/domain/entities/push_notification.dart",
          "lib/features/notifications/domain/repositories/notification_repository.dart",
          "lib/features/notifications/domain/usecases/initialize_notifications_usecase.dart",
          "lib/features/notifications/domain/usecases/handle_notification_tap_usecase.dart",
          "lib/features/notifications/domain/usecases/request_notification_permission_usecase.dart",
          "lib/features/notifications/data/datasources/notification_remote_datasource.dart",
          "lib/features/notifications/data/repositories/notification_repository_impl.dart",
          "lib/features/notifications/data/models/push_notification_model.dart",
          "lib/features/notifications/presentation/bloc/notification_bloc.dart",
          "lib/features/notifications/presentation/bloc/notification_event.dart",
          "lib/features/notifications/presentation/bloc/notification_state.dart",
          "lib/core/services/firebase_messaging_service.dart",
          "android/app/google-services.json",
          "ios/Runner/GoogleService-Info.plist",
          "ios/firebase_app_id_file.json"
        ],
        "filesToRead": [
          "lib/main.dart",
          "lib/core/router/app_router.dart",
          "android/app/build.gradle"
        ],
        "estimatedComplexity": "high",
        "dependencies": [
          "epic-native-health-integration"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture for notifications feature",
          "Service layer for Firebase initialization",
          "Deep linking integration with GoRouter"
        ],
        "repoType": "frontend"
      }
    ]
  }
}