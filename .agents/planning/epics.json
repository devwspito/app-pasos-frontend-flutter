{
  "_metadata": {
    "agentType": "planning",
    "taskId": "77ff242d9e9736e416d9620c",
    "timestamp": "2026-01-26T17:39:47.037Z",
    "phase": "planning",
    "savedAt": "2026-01-26T17:39:47.037Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "AA21",
    "taskDescription": "Descripción de tareas para completar el frontend en Flutter\n\nCompletar los 9 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nEl frontend debe ir en: project-app-pasos-frontend-flutter (crear nueva estructura)\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nFLUTTER FOUNDATION\n\nSetup de Flutter + estructura del proyecto\n\nConfiguración de dependencias base (provider/bloc, dio, etc.)\n\nPLATFORM CONFIG\n\nConfiguración para iOS/Android\n\nPermisos para Health APIs (HealthKit/Google Fit)\n\nConfiguración de AndroidManifest.xml y Info.plist\n\nUI FOUNDATION\n\nSistema de diseño con Material Design 3\n\nRouting y navegación (go_router)\n\nTema oscuro/claro (ThemeData)\n\nWidgets reutilizables\n\nAUTH UI\n\nPantallas de login, registro y recuperación de contraseña\n\nGestión de estado de autenticación\n\nAlmacenamiento seguro de tokens (flutter_secure_storage)\n\nDASHBOARD\n\nVista principal con contador de pasos\n\nHistorial de actividad\n\nGráficos (fl_chart o charts_flutter)\n\nPull-to-refresh\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)\n\nManejo de reconexión",
    "epicsCount": 9,
    "epics": [
      {
        "id": "epic-flutter-foundation",
        "title": "Flutter Foundation - Project Setup and Core Dependencies",
        "description": "Initialize Flutter project structure with all required dependencies including state management (Provider), HTTP client (Dio), secure storage, and establish the core architecture patterns for the app.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "lib/main.dart",
          "analysis_options.yaml"
        ],
        "filesToCreate": [
          "lib/core/constants/app_constants.dart",
          "lib/core/constants/api_endpoints.dart",
          "lib/core/config/app_config.dart",
          "lib/core/config/environment.dart",
          "lib/core/di/service_locator.dart",
          "lib/core/network/api_client.dart",
          "lib/core/network/api_interceptor.dart",
          "lib/core/network/api_response.dart",
          "lib/core/network/api_exceptions.dart",
          "lib/core/storage/secure_storage_service.dart",
          "lib/core/utils/logger.dart",
          "lib/core/utils/validators.dart",
          "lib/data/models/user_model.dart",
          "lib/data/models/step_model.dart",
          "lib/data/models/goal_model.dart",
          "lib/data/models/sharing_model.dart",
          "lib/data/repositories/base_repository.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/types/index.ts",
          "project-app-pasos-backend/src/models/User.ts",
          "project-app-pasos-backend/src/models/Step.ts"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Uses standard Flutter lib-based structure",
          "Implements clean architecture with data/domain/presentation layers",
          "Uses Dio for HTTP with interceptors pattern"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-platform-config",
        "title": "Platform Configuration - iOS and Android Health API Setup",
        "description": "Configure platform-specific settings for iOS (HealthKit) and Android (Google Fit/Health Connect) including required permissions, entitlements, and native configuration files.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist",
          "android/app/build.gradle",
          "ios/Podfile"
        ],
        "filesToCreate": [
          "ios/Runner/Runner.entitlements",
          "android/app/src/main/kotlin/com/example/app_pasos_frontend/MainActivity.kt"
        ],
        "filesToRead": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Standard Flutter platform configuration",
          "Health package integration requirements"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-ui-foundation",
        "title": "UI Foundation - Design System and Navigation",
        "description": "Implement Material Design 3 theming with light/dark mode support, configure go_router navigation with auth guards, and create reusable widget components for consistent UI across the app.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart"
        ],
        "filesToCreate": [
          "lib/core/theme/app_theme.dart",
          "lib/core/theme/app_colors.dart",
          "lib/core/theme/app_text_styles.dart",
          "lib/core/theme/app_spacing.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/router/auth_guard.dart",
          "lib/presentation/widgets/common/app_button.dart",
          "lib/presentation/widgets/common/app_text_field.dart",
          "lib/presentation/widgets/common/app_card.dart",
          "lib/presentation/widgets/common/app_loading.dart",
          "lib/presentation/widgets/common/app_error_widget.dart",
          "lib/presentation/widgets/common/app_empty_state.dart",
          "lib/presentation/widgets/common/app_avatar.dart",
          "lib/presentation/widgets/common/app_bottom_nav.dart",
          "lib/presentation/widgets/common/app_scaffold.dart"
        ],
        "filesToRead": [],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Material Design 3 with ColorScheme.fromSeed",
          "go_router for declarative navigation",
          "Reusable widget pattern with const constructors"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-auth-ui",
        "title": "Auth UI - Login, Register and Password Recovery",
        "description": "Implement complete authentication screens including login, registration, password recovery, and authentication state management with secure token storage and automatic token refresh.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/data/repositories/auth_repository.dart",
          "lib/data/datasources/auth_remote_datasource.dart",
          "lib/domain/entities/auth_tokens.dart",
          "lib/presentation/screens/auth/login_screen.dart",
          "lib/presentation/screens/auth/register_screen.dart",
          "lib/presentation/screens/auth/forgot_password_screen.dart",
          "lib/presentation/screens/auth/splash_screen.dart",
          "lib/presentation/providers/auth_provider.dart",
          "lib/presentation/widgets/auth/auth_form.dart",
          "lib/presentation/widgets/auth/social_login_buttons.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/auth.routes.ts",
          "project-app-pasos-backend/src/controllers/auth.controller.ts"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-ui-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Provider for state management",
          "flutter_secure_storage for token persistence",
          "Form validation with validators"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-dashboard",
        "title": "Dashboard - Step Counter and Activity History",
        "description": "Build the main dashboard with real-time step counter display, daily/weekly activity charts using fl_chart, step statistics, and pull-to-refresh functionality for data sync.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/data/repositories/steps_repository.dart",
          "lib/data/datasources/steps_remote_datasource.dart",
          "lib/domain/entities/step_stats.dart",
          "lib/domain/entities/daily_steps.dart",
          "lib/domain/entities/hourly_steps.dart",
          "lib/presentation/screens/dashboard/dashboard_screen.dart",
          "lib/presentation/screens/dashboard/step_detail_screen.dart",
          "lib/presentation/providers/steps_provider.dart",
          "lib/presentation/widgets/dashboard/step_counter_card.dart",
          "lib/presentation/widgets/dashboard/weekly_chart.dart",
          "lib/presentation/widgets/dashboard/hourly_chart.dart",
          "lib/presentation/widgets/dashboard/stats_summary.dart",
          "lib/presentation/widgets/dashboard/activity_timeline.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/steps.routes.ts",
          "project-app-pasos-backend/src/services/steps.service.ts"
        ],
        "estimatedComplexity": "high",
        "dependencies": [
          "epic-auth-ui",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "fl_chart for data visualization",
          "Pull-to-refresh with RefreshIndicator",
          "Provider for step data state"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-sharing-ui",
        "title": "Sharing UI - Friends and Activity Sharing",
        "description": "Implement friend management including user search, sending/accepting/rejecting sharing requests, viewing friend list, and displaying shared friends' step activity and statistics.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart",
          "lib/presentation/widgets/common/app_bottom_nav.dart"
        ],
        "filesToCreate": [
          "lib/data/repositories/sharing_repository.dart",
          "lib/data/repositories/users_repository.dart",
          "lib/data/datasources/sharing_remote_datasource.dart",
          "lib/data/datasources/users_remote_datasource.dart",
          "lib/domain/entities/sharing_relationship.dart",
          "lib/domain/entities/friend_stats.dart",
          "lib/presentation/screens/sharing/friends_screen.dart",
          "lib/presentation/screens/sharing/friend_requests_screen.dart",
          "lib/presentation/screens/sharing/friend_activity_screen.dart",
          "lib/presentation/screens/sharing/user_search_screen.dart",
          "lib/presentation/providers/sharing_provider.dart",
          "lib/presentation/providers/users_provider.dart",
          "lib/presentation/widgets/sharing/friend_card.dart",
          "lib/presentation/widgets/sharing/request_card.dart",
          "lib/presentation/widgets/sharing/friend_stats_card.dart",
          "lib/presentation/widgets/sharing/user_search_tile.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/sharing.routes.ts",
          "project-app-pasos-backend/src/routes/users.routes.ts",
          "project-app-pasos-backend/src/models/SharingRelationship.ts"
        ],
        "estimatedComplexity": "high",
        "dependencies": [
          "epic-dashboard",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Search with debounce pattern",
          "List with empty/loading/error states",
          "Confirmation dialogs for destructive actions"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-goals-ui",
        "title": "Goals UI - Group Goals and Rankings",
        "description": "Build group goals functionality including goal creation/editing, member invitations, progress tracking with visual indicators, group rankings/leaderboard, and goal completion celebrations.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart",
          "lib/presentation/widgets/common/app_bottom_nav.dart"
        ],
        "filesToCreate": [
          "lib/data/repositories/goals_repository.dart",
          "lib/data/datasources/goals_remote_datasource.dart",
          "lib/domain/entities/group_goal.dart",
          "lib/domain/entities/goal_membership.dart",
          "lib/domain/entities/goal_progress.dart",
          "lib/presentation/screens/goals/goals_list_screen.dart",
          "lib/presentation/screens/goals/goal_detail_screen.dart",
          "lib/presentation/screens/goals/create_goal_screen.dart",
          "lib/presentation/screens/goals/goal_invitations_screen.dart",
          "lib/presentation/screens/goals/goal_leaderboard_screen.dart",
          "lib/presentation/providers/goals_provider.dart",
          "lib/presentation/widgets/goals/goal_card.dart",
          "lib/presentation/widgets/goals/goal_progress_indicator.dart",
          "lib/presentation/widgets/goals/member_avatar_row.dart",
          "lib/presentation/widgets/goals/leaderboard_tile.dart",
          "lib/presentation/widgets/goals/invite_member_dialog.dart",
          "lib/presentation/widgets/goals/goal_form.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/goals.routes.ts",
          "project-app-pasos-backend/src/models/GroupGoal.ts",
          "project-app-pasos-backend/src/models/GroupGoalMembership.ts"
        ],
        "estimatedComplexity": "high",
        "dependencies": [
          "epic-sharing-ui",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Form validation for goal creation",
          "Progress visualization with LinearProgressIndicator",
          "Ranked list with position indicators"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-native-integration",
        "title": "Native Integration - Health API Step Tracking",
        "description": "Integrate with native health APIs (Apple HealthKit on iOS, Google Fit/Health Connect on Android) using the health package for automatic step reading, permission handling, and background data synchronization.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "lib/presentation/providers/steps_provider.dart",
          "lib/data/repositories/steps_repository.dart"
        ],
        "filesToCreate": [
          "lib/core/services/health_service.dart",
          "lib/core/services/permission_service.dart",
          "lib/core/services/background_sync_service.dart",
          "lib/data/datasources/health_local_datasource.dart",
          "lib/presentation/screens/settings/health_permissions_screen.dart",
          "lib/presentation/screens/settings/settings_screen.dart",
          "lib/presentation/widgets/settings/permission_tile.dart",
          "lib/presentation/widgets/settings/sync_status_indicator.dart"
        ],
        "filesToRead": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "estimatedComplexity": "high",
        "dependencies": [
          "epic-dashboard",
          "epic-platform-config",
          "epic-flutter-foundation",
          "epic-dashboard"
        ],
        "executionOrder": 5,
        "followsPatterns": [
          "health package for cross-platform health data",
          "Permission request flow with fallback",
          "Background isolate for sync tasks"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-realtime-client",
        "title": "Real-Time Client - WebSocket and Push Notifications",
        "description": "Implement WebSocket client using web_socket_channel for real-time step updates and goal progress, integrate Firebase Cloud Messaging for push notifications, and handle connection state management with automatic reconnection.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "lib/presentation/providers/steps_provider.dart",
          "lib/presentation/providers/goals_provider.dart",
          "android/app/build.gradle",
          "ios/Runner/Info.plist"
        ],
        "filesToCreate": [
          "lib/core/services/socket_service.dart",
          "lib/core/services/notification_service.dart",
          "lib/core/services/firebase_service.dart",
          "lib/data/datasources/socket_datasource.dart",
          "lib/presentation/widgets/common/connection_status_banner.dart",
          "android/app/google-services.json",
          "ios/Runner/GoogleService-Info.plist",
          "ios/firebase_app_id_file.json"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/socket/types.ts",
          "project-app-pasos-backend/src/socket/index.ts"
        ],
        "estimatedComplexity": "high",
        "dependencies": [
          "epic-dashboard",
          "epic-goals-ui",
          "epic-flutter-foundation",
          "epic-platform-config",
          "epic-dashboard",
          "epic-goals-ui"
        ],
        "executionOrder": 7,
        "followsPatterns": [
          "web_socket_channel for WebSocket",
          "firebase_messaging for push notifications",
          "Exponential backoff for reconnection",
          "Stream-based real-time updates"
        ],
        "repoType": "frontend"
      }
    ]
  }
}