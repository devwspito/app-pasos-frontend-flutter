{
  "_metadata": {
    "agentType": "planning",
    "taskId": "3a1dc78e87f51e1d1509b49c",
    "timestamp": "2026-01-24T02:59:32.419Z",
    "phase": "planning",
    "savedAt": "2026-01-24T02:59:32.419Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "aeae",
    "taskDescription": "Completar los 9 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nEl frontend debe ir en: project-app-pasos-frontend-flutter (crear nueva estructura)\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nFLUTTER FOUNDATION\n\nSetup de Flutter + estructura del proyecto\n\nConfiguración de dependencias base (provider/bloc, dio, etc.)\n\nPLATFORM CONFIG\n\nConfiguración para iOS/Android\n\nPermisos para Health APIs (HealthKit/Google Fit)\n\nConfiguración de AndroidManifest.xml y Info.plist\n\nUI FOUNDATION\n\nSistema de diseño con Material Design 3\n\nRouting y navegación (go_router)\n\nTema oscuro/claro (ThemeData)\n\nWidgets reutilizables\n\nAUTH UI\n\nPantallas de login, registro y recuperación de contraseña\n\nGestión de estado de autenticación\n\nAlmacenamiento seguro de tokens (flutter_secure_storage)\n\nDASHBOARD\n\nVista principal con contador de pasos\n\nHistorial de actividad\n\nGráficos (fl_chart o charts_flutter)\n\nPull-to-refresh\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)\n\nManejo de reconexión",
    "epicsCount": 9,
    "epics": [
      {
        "id": "epic-flutter-foundation",
        "title": "Flutter Foundation - Project Setup and Dependencies",
        "description": "Initialize Flutter project structure with feature-first architecture, configure all required dependencies (dio, provider/riverpod, go_router, etc.), set up environment configuration, and establish base classes for API communication",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "lib/main.dart",
          "analysis_options.yaml"
        ],
        "filesToCreate": [
          "lib/core/config/app_config.dart",
          "lib/core/config/env_config.dart",
          "lib/core/network/api_client.dart",
          "lib/core/network/api_endpoints.dart",
          "lib/core/network/api_interceptors.dart",
          "lib/core/network/api_response.dart",
          "lib/core/error/app_exception.dart",
          "lib/core/error/failure.dart",
          "lib/core/utils/result.dart",
          "lib/core/utils/logger.dart",
          "lib/core/constants/app_constants.dart",
          "lib/core/di/injection_container.dart",
          "lib/app.dart",
          ".env.example",
          ".env.development"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/index.ts",
          "project-app-pasos-backend/package.json"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Feature-first architecture",
          "Clean Architecture layers",
          "Dependency injection pattern"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-platform-config",
        "title": "Platform Configuration - iOS and Android Health API Setup",
        "description": "Configure AndroidManifest.xml for Google Fit/Health Connect permissions, Info.plist for HealthKit permissions, set up background modes, and configure app identifiers and signing",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist",
          "android/app/build.gradle.kts",
          "ios/Runner.xcodeproj/project.pbxproj"
        ],
        "filesToCreate": [
          "android/app/src/main/res/values/strings.xml",
          "ios/Runner/Runner.entitlements",
          "lib/core/platform/platform_service.dart",
          "lib/core/platform/health_permissions.dart"
        ],
        "filesToRead": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation"
        ],
        "executionOrder": 1,
        "followsPatterns": [
          "Platform-specific configuration",
          "Permission handling best practices"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-ui-foundation",
        "title": "UI Foundation - Design System and Navigation",
        "description": "Implement Material Design 3 theme system with light/dark modes, create reusable widget library (buttons, cards, inputs, loading states), set up go_router navigation with route guards, and establish responsive layout foundations",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "lib/app.dart"
        ],
        "filesToCreate": [
          "lib/core/theme/app_theme.dart",
          "lib/core/theme/app_colors.dart",
          "lib/core/theme/app_text_styles.dart",
          "lib/core/theme/app_dimensions.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/router/route_guards.dart",
          "lib/shared/widgets/app_button.dart",
          "lib/shared/widgets/app_text_field.dart",
          "lib/shared/widgets/app_card.dart",
          "lib/shared/widgets/app_loading.dart",
          "lib/shared/widgets/app_error_widget.dart",
          "lib/shared/widgets/app_empty_state.dart",
          "lib/shared/widgets/app_avatar.dart",
          "lib/shared/widgets/app_bottom_nav.dart",
          "lib/shared/layouts/base_scaffold.dart",
          "lib/shared/layouts/responsive_layout.dart"
        ],
        "filesToRead": [
          "lib/main.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Material Design 3 guidelines",
          "Reusable widget patterns",
          "Theme extension pattern"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-auth-ui",
        "title": "Authentication UI - Login, Register, and Token Management",
        "description": "Build authentication screens (login, register, forgot password), implement auth state management with secure token storage using flutter_secure_storage, create auth repository integrating with backend /api/auth endpoints, and handle token refresh logic",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart",
          "lib/core/router/route_guards.dart",
          "lib/core/network/api_interceptors.dart"
        ],
        "filesToCreate": [
          "lib/features/auth/data/models/user_model.dart",
          "lib/features/auth/data/models/auth_tokens_model.dart",
          "lib/features/auth/data/datasources/auth_remote_datasource.dart",
          "lib/features/auth/data/datasources/auth_local_datasource.dart",
          "lib/features/auth/data/repositories/auth_repository_impl.dart",
          "lib/features/auth/domain/entities/user.dart",
          "lib/features/auth/domain/repositories/auth_repository.dart",
          "lib/features/auth/domain/usecases/login_usecase.dart",
          "lib/features/auth/domain/usecases/register_usecase.dart",
          "lib/features/auth/domain/usecases/logout_usecase.dart",
          "lib/features/auth/domain/usecases/get_current_user_usecase.dart",
          "lib/features/auth/presentation/providers/auth_provider.dart",
          "lib/features/auth/presentation/screens/login_screen.dart",
          "lib/features/auth/presentation/screens/register_screen.dart",
          "lib/features/auth/presentation/screens/forgot_password_screen.dart",
          "lib/features/auth/presentation/widgets/auth_form.dart",
          "lib/features/auth/presentation/widgets/password_field.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/auth.routes.ts",
          "project-app-pasos-backend/src/controllers/auth.controller.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-ui-foundation",
          "epic-flutter-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture layers",
          "Secure token storage",
          "Repository pattern"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-dashboard",
        "title": "Dashboard - Steps Display, History, and Charts",
        "description": "Create main dashboard screen with today's step count, implement weekly trend visualization using fl_chart, display hourly peaks chart, add pull-to-refresh functionality, integrate with backend /api/steps endpoints, and show user statistics",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart",
          "lib/shared/widgets/app_bottom_nav.dart"
        ],
        "filesToCreate": [
          "lib/features/dashboard/data/models/step_model.dart",
          "lib/features/dashboard/data/models/step_stats_model.dart",
          "lib/features/dashboard/data/models/weekly_trend_model.dart",
          "lib/features/dashboard/data/models/hourly_peaks_model.dart",
          "lib/features/dashboard/data/datasources/steps_remote_datasource.dart",
          "lib/features/dashboard/data/repositories/steps_repository_impl.dart",
          "lib/features/dashboard/domain/entities/step_record.dart",
          "lib/features/dashboard/domain/entities/step_stats.dart",
          "lib/features/dashboard/domain/repositories/steps_repository.dart",
          "lib/features/dashboard/domain/usecases/get_today_steps_usecase.dart",
          "lib/features/dashboard/domain/usecases/get_weekly_trend_usecase.dart",
          "lib/features/dashboard/domain/usecases/get_hourly_peaks_usecase.dart",
          "lib/features/dashboard/domain/usecases/get_stats_usecase.dart",
          "lib/features/dashboard/domain/usecases/record_steps_usecase.dart",
          "lib/features/dashboard/presentation/providers/dashboard_provider.dart",
          "lib/features/dashboard/presentation/screens/dashboard_screen.dart",
          "lib/features/dashboard/presentation/widgets/step_counter_card.dart",
          "lib/features/dashboard/presentation/widgets/weekly_chart.dart",
          "lib/features/dashboard/presentation/widgets/hourly_chart.dart",
          "lib/features/dashboard/presentation/widgets/stats_card.dart",
          "lib/features/dashboard/presentation/widgets/activity_ring.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/steps.routes.ts",
          "project-app-pasos-backend/src/controllers/steps.controller.ts",
          "project-app-pasos-backend/src/models/Step.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-ui-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Chart visualization with fl_chart",
          "Pull-to-refresh pattern",
          "Statistics display patterns"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-sharing-ui",
        "title": "Sharing UI - Friends List and Activity Sharing",
        "description": "Build friends management screens including friend list, pending requests, and friend search. Implement sharing request flow (send/accept/reject), display friends' step activity, integrate with backend /api/sharing and /api/users endpoints",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart",
          "lib/shared/widgets/app_bottom_nav.dart"
        ],
        "filesToCreate": [
          "lib/features/sharing/data/models/sharing_relationship_model.dart",
          "lib/features/sharing/data/models/shared_user_stats_model.dart",
          "lib/features/sharing/data/datasources/sharing_remote_datasource.dart",
          "lib/features/sharing/data/datasources/users_remote_datasource.dart",
          "lib/features/sharing/data/repositories/sharing_repository_impl.dart",
          "lib/features/sharing/domain/entities/sharing_relationship.dart",
          "lib/features/sharing/domain/entities/shared_user.dart",
          "lib/features/sharing/domain/repositories/sharing_repository.dart",
          "lib/features/sharing/domain/usecases/get_relationships_usecase.dart",
          "lib/features/sharing/domain/usecases/send_request_usecase.dart",
          "lib/features/sharing/domain/usecases/accept_request_usecase.dart",
          "lib/features/sharing/domain/usecases/reject_request_usecase.dart",
          "lib/features/sharing/domain/usecases/revoke_sharing_usecase.dart",
          "lib/features/sharing/domain/usecases/get_shared_user_stats_usecase.dart",
          "lib/features/sharing/domain/usecases/search_users_usecase.dart",
          "lib/features/sharing/presentation/providers/sharing_provider.dart",
          "lib/features/sharing/presentation/screens/friends_screen.dart",
          "lib/features/sharing/presentation/screens/friend_requests_screen.dart",
          "lib/features/sharing/presentation/screens/add_friend_screen.dart",
          "lib/features/sharing/presentation/screens/friend_detail_screen.dart",
          "lib/features/sharing/presentation/widgets/friend_card.dart",
          "lib/features/sharing/presentation/widgets/request_card.dart",
          "lib/features/sharing/presentation/widgets/user_search_tile.dart",
          "lib/features/sharing/presentation/widgets/friend_activity_card.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/sharing.routes.ts",
          "project-app-pasos-backend/src/routes/users.routes.ts",
          "project-app-pasos-backend/src/models/SharingRelationship.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-ui-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "List/detail navigation pattern",
          "Search with debounce",
          "Request/response flow patterns"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-goals-ui",
        "title": "Goals UI - Group Goals, Progress, and Rankings",
        "description": "Create group goals screens including goals list, goal creation form, goal details with member list, progress tracking visualization, and member rankings. Integrate with backend /api/goals endpoints",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart",
          "lib/shared/widgets/app_bottom_nav.dart"
        ],
        "filesToCreate": [
          "lib/features/goals/data/models/group_goal_model.dart",
          "lib/features/goals/data/models/goal_membership_model.dart",
          "lib/features/goals/data/models/goal_progress_model.dart",
          "lib/features/goals/data/datasources/goals_remote_datasource.dart",
          "lib/features/goals/data/repositories/goals_repository_impl.dart",
          "lib/features/goals/domain/entities/group_goal.dart",
          "lib/features/goals/domain/entities/goal_membership.dart",
          "lib/features/goals/domain/entities/goal_progress.dart",
          "lib/features/goals/domain/repositories/goals_repository.dart",
          "lib/features/goals/domain/usecases/get_user_goals_usecase.dart",
          "lib/features/goals/domain/usecases/create_goal_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_details_usecase.dart",
          "lib/features/goals/domain/usecases/invite_user_usecase.dart",
          "lib/features/goals/domain/usecases/join_goal_usecase.dart",
          "lib/features/goals/domain/usecases/leave_goal_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_progress_usecase.dart",
          "lib/features/goals/presentation/providers/goals_provider.dart",
          "lib/features/goals/presentation/screens/goals_screen.dart",
          "lib/features/goals/presentation/screens/create_goal_screen.dart",
          "lib/features/goals/presentation/screens/goal_detail_screen.dart",
          "lib/features/goals/presentation/screens/goal_members_screen.dart",
          "lib/features/goals/presentation/widgets/goal_card.dart",
          "lib/features/goals/presentation/widgets/goal_progress_bar.dart",
          "lib/features/goals/presentation/widgets/member_ranking_list.dart",
          "lib/features/goals/presentation/widgets/member_invite_dialog.dart",
          "lib/features/goals/presentation/widgets/goal_date_picker.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/goals.routes.ts",
          "project-app-pasos-backend/src/controllers/goals.controller.ts",
          "project-app-pasos-backend/src/models/GroupGoal.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-sharing-ui",
          "epic-ui-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Form validation patterns",
          "Progress visualization",
          "Ranking/leaderboard patterns"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-native-integration",
        "title": "Native Integration - Health APIs and Background Sync",
        "description": "Integrate health package for reading steps from HealthKit (iOS) and Google Fit/Health Connect (Android), implement background sync service to periodically send step data to backend, handle permission requests gracefully, and manage health data caching",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/features/dashboard/presentation/providers/dashboard_provider.dart",
          "lib/features/dashboard/domain/usecases/record_steps_usecase.dart",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/core/services/health_service.dart",
          "lib/core/services/background_sync_service.dart",
          "lib/core/services/step_sync_manager.dart",
          "lib/features/health/data/datasources/health_local_datasource.dart",
          "lib/features/health/data/repositories/health_repository_impl.dart",
          "lib/features/health/domain/entities/health_data.dart",
          "lib/features/health/domain/repositories/health_repository.dart",
          "lib/features/health/domain/usecases/get_steps_from_health_usecase.dart",
          "lib/features/health/domain/usecases/request_health_permissions_usecase.dart",
          "lib/features/health/domain/usecases/sync_steps_to_backend_usecase.dart",
          "lib/features/health/presentation/providers/health_provider.dart",
          "lib/features/health/presentation/widgets/health_permission_dialog.dart",
          "lib/features/health/presentation/widgets/sync_status_indicator.dart"
        ],
        "filesToRead": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-platform-config",
          "epic-dashboard",
          "epic-flutter-foundation",
          "epic-dashboard"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Platform channel patterns",
          "Background task handling",
          "Permission request flow"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      },
      {
        "id": "epic-realtime-client",
        "title": "Real-Time Client - WebSocket and Push Notifications",
        "description": "Implement WebSocket client using web_socket_channel for real-time updates (steps-updated, goal-progress events), handle connection/reconnection logic, integrate firebase_messaging for push notifications, and manage notification permissions",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/features/dashboard/presentation/providers/dashboard_provider.dart",
          "lib/features/sharing/presentation/providers/sharing_provider.dart",
          "lib/features/goals/presentation/providers/goals_provider.dart",
          "pubspec.yaml",
          "android/app/build.gradle.kts"
        ],
        "filesToCreate": [
          "lib/core/services/socket_service.dart",
          "lib/core/services/socket_events.dart",
          "lib/core/services/notification_service.dart",
          "lib/core/services/push_notification_handler.dart",
          "lib/features/realtime/data/models/socket_event_model.dart",
          "lib/features/realtime/data/models/steps_updated_event.dart",
          "lib/features/realtime/data/models/goal_progress_event.dart",
          "lib/features/realtime/domain/entities/socket_event.dart",
          "lib/features/realtime/presentation/providers/realtime_provider.dart",
          "lib/features/realtime/presentation/widgets/connection_status_badge.dart",
          "lib/features/notifications/presentation/providers/notification_provider.dart",
          "lib/features/notifications/presentation/screens/notification_settings_screen.dart",
          "android/app/google-services.json",
          "ios/Runner/GoogleService-Info.plist",
          "ios/firebase_app_id_file.json"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/socket/index.ts",
          "project-app-pasos-backend/src/socket/types.ts",
          "project-app-pasos-backend/src/socket/handlers/sharing.handler.ts",
          "project-app-pasos-backend/src/socket/handlers/goals.handler.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-dashboard",
          "epic-sharing-ui",
          "epic-goals-ui",
          "epic-flutter-foundation",
          "epic-platform-config",
          "epic-dashboard",
          "epic-sharing-ui",
          "epic-goals-ui"
        ],
        "executionOrder": 4,
        "followsPatterns": [
          "WebSocket reconnection patterns",
          "Event-driven architecture",
          "Push notification handling"
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d all",
          "devPort": 5037
        }
      }
    ]
  }
}