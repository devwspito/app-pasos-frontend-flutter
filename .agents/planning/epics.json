{
  "_metadata": {
    "agentType": "planning",
    "taskId": "12baa90f412362136a0177ff",
    "timestamp": "2026-01-27T11:49:12.607Z",
    "phase": "planning",
    "savedAt": "2026-01-27T11:49:12.607Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "Continue",
    "taskDescription": "Descripción de tareas para completar el frontend en Flutter\n\nCompletar los 7 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nEl frontend debe ir en: project-app-pasos-frontend-flutter (crear nueva estructura)\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nAUTH UI\n\nPantallas de login, registro y recuperación de contraseña\n\nGestión de estado de autenticación\n\nAlmacenamiento seguro de tokens (flutter_secure_storage)\n\nDASHBOARD\n\nVista principal con contador de pasos\n\nHistorial de actividad\n\nGráficos (fl_chart o charts_flutter)\n\nPull-to-refresh\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)\n\nManejo de reconexión",
    "epicsCount": 6,
    "epics": [
      {
        "id": "epic-auth-ui",
        "title": "Authentication UI Module",
        "description": "Complete authentication flow with login, registration, password recovery screens, and auth state management using secure token storage. Integrates with existing ApiClient and SecureStorageService.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/network/api_endpoints.dart"
        ],
        "filesToCreate": [
          "lib/features/auth/data/models/user_model.dart",
          "lib/features/auth/data/models/auth_response_model.dart",
          "lib/features/auth/data/repositories/auth_repository_impl.dart",
          "lib/features/auth/data/datasources/auth_remote_datasource.dart",
          "lib/features/auth/domain/entities/user.dart",
          "lib/features/auth/domain/repositories/auth_repository.dart",
          "lib/features/auth/domain/usecases/login_usecase.dart",
          "lib/features/auth/domain/usecases/register_usecase.dart",
          "lib/features/auth/domain/usecases/logout_usecase.dart",
          "lib/features/auth/domain/usecases/get_current_user_usecase.dart",
          "lib/features/auth/presentation/bloc/auth_bloc.dart",
          "lib/features/auth/presentation/bloc/auth_event.dart",
          "lib/features/auth/presentation/bloc/auth_state.dart",
          "lib/features/auth/presentation/pages/login_page.dart",
          "lib/features/auth/presentation/pages/register_page.dart",
          "lib/features/auth/presentation/pages/forgot_password_page.dart",
          "lib/features/auth/presentation/widgets/auth_form.dart",
          "lib/features/auth/presentation/widgets/password_field.dart"
        ],
        "filesToRead": [
          "lib/core/network/api_client.dart",
          "lib/core/storage/secure_storage_service.dart",
          "lib/shared/widgets/app_text_field.dart",
          "lib/shared/widgets/app_button.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Uses existing ApiClient for HTTP requests",
          "Uses SecureStorageService for token storage",
          "Uses existing shared widgets (AppTextField, AppButton)",
          "Follows Clean Architecture layers",
          "Uses flutter_bloc for state management"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-dashboard",
        "title": "Dashboard & Step Tracking Module",
        "description": "Main dashboard with real-time step counter, daily/weekly statistics, hourly activity charts using fl_chart, and pull-to-refresh functionality. Displays user's step history with visual progress indicators.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/network/api_endpoints.dart",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/features/dashboard/data/models/step_model.dart",
          "lib/features/dashboard/data/models/step_stats_model.dart",
          "lib/features/dashboard/data/models/weekly_trend_model.dart",
          "lib/features/dashboard/data/models/hourly_peak_model.dart",
          "lib/features/dashboard/data/repositories/steps_repository_impl.dart",
          "lib/features/dashboard/data/datasources/steps_remote_datasource.dart",
          "lib/features/dashboard/data/datasources/steps_local_datasource.dart",
          "lib/features/dashboard/domain/entities/step_record.dart",
          "lib/features/dashboard/domain/entities/step_stats.dart",
          "lib/features/dashboard/domain/repositories/steps_repository.dart",
          "lib/features/dashboard/domain/usecases/get_today_steps_usecase.dart",
          "lib/features/dashboard/domain/usecases/get_weekly_trend_usecase.dart",
          "lib/features/dashboard/domain/usecases/get_hourly_peaks_usecase.dart",
          "lib/features/dashboard/domain/usecases/record_steps_usecase.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_bloc.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_event.dart",
          "lib/features/dashboard/presentation/bloc/dashboard_state.dart",
          "lib/features/dashboard/presentation/pages/dashboard_page.dart",
          "lib/features/dashboard/presentation/widgets/step_counter_card.dart",
          "lib/features/dashboard/presentation/widgets/weekly_chart.dart",
          "lib/features/dashboard/presentation/widgets/hourly_chart.dart",
          "lib/features/dashboard/presentation/widgets/stats_summary_card.dart",
          "lib/features/dashboard/presentation/widgets/activity_history_list.dart"
        ],
        "filesToRead": [
          "lib/core/network/api_client.dart",
          "lib/shared/widgets/app_card.dart",
          "lib/shared/widgets/loading_indicator.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-auth-ui"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Uses fl_chart for data visualization",
          "Uses RefreshIndicator for pull-to-refresh",
          "Implements local caching for offline support",
          "Uses AnimatedBuilder for smooth counter animations"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-sharing-ui",
        "title": "Social Sharing & Friends Module",
        "description": "Friends management system with friend requests (send/accept/reject), friends list with search, viewing friends' step activity, and sharing relationship status management.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/network/api_endpoints.dart"
        ],
        "filesToCreate": [
          "lib/features/sharing/data/models/sharing_relationship_model.dart",
          "lib/features/sharing/data/models/friend_stats_model.dart",
          "lib/features/sharing/data/repositories/sharing_repository_impl.dart",
          "lib/features/sharing/data/datasources/sharing_remote_datasource.dart",
          "lib/features/sharing/domain/entities/sharing_relationship.dart",
          "lib/features/sharing/domain/entities/friend_activity.dart",
          "lib/features/sharing/domain/repositories/sharing_repository.dart",
          "lib/features/sharing/domain/usecases/get_relationships_usecase.dart",
          "lib/features/sharing/domain/usecases/send_request_usecase.dart",
          "lib/features/sharing/domain/usecases/accept_request_usecase.dart",
          "lib/features/sharing/domain/usecases/reject_request_usecase.dart",
          "lib/features/sharing/domain/usecases/get_friend_stats_usecase.dart",
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/sharing/presentation/bloc/sharing_event.dart",
          "lib/features/sharing/presentation/bloc/sharing_state.dart",
          "lib/features/sharing/presentation/pages/friends_page.dart",
          "lib/features/sharing/presentation/pages/friend_requests_page.dart",
          "lib/features/sharing/presentation/pages/friend_detail_page.dart",
          "lib/features/sharing/presentation/pages/add_friend_page.dart",
          "lib/features/sharing/presentation/widgets/friend_list_tile.dart",
          "lib/features/sharing/presentation/widgets/request_list_tile.dart",
          "lib/features/sharing/presentation/widgets/friend_activity_card.dart",
          "lib/features/sharing/presentation/widgets/user_search_delegate.dart"
        ],
        "filesToRead": [
          "lib/core/network/api_client.dart",
          "lib/shared/widgets/avatar_widget.dart",
          "lib/shared/widgets/empty_state.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-auth-ui",
          "epic-auth-ui"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Uses SearchDelegate for user search",
          "Uses Slidable for swipe actions on list items",
          "Implements pull-to-refresh for lists",
          "Uses badges for pending request count"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-goals-ui",
        "title": "Group Goals & Challenges Module",
        "description": "Group goals feature with goal creation/editing, member invitations, progress tracking with rankings, and collective achievement visualization. Supports both creator and member perspectives.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/network/api_endpoints.dart"
        ],
        "filesToCreate": [
          "lib/features/goals/data/models/group_goal_model.dart",
          "lib/features/goals/data/models/goal_membership_model.dart",
          "lib/features/goals/data/models/goal_progress_model.dart",
          "lib/features/goals/data/repositories/goals_repository_impl.dart",
          "lib/features/goals/data/datasources/goals_remote_datasource.dart",
          "lib/features/goals/domain/entities/group_goal.dart",
          "lib/features/goals/domain/entities/goal_membership.dart",
          "lib/features/goals/domain/entities/goal_progress.dart",
          "lib/features/goals/domain/repositories/goals_repository.dart",
          "lib/features/goals/domain/usecases/get_user_goals_usecase.dart",
          "lib/features/goals/domain/usecases/create_goal_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_details_usecase.dart",
          "lib/features/goals/domain/usecases/invite_user_usecase.dart",
          "lib/features/goals/domain/usecases/join_goal_usecase.dart",
          "lib/features/goals/domain/usecases/leave_goal_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_progress_usecase.dart",
          "lib/features/goals/presentation/bloc/goals_bloc.dart",
          "lib/features/goals/presentation/bloc/goals_event.dart",
          "lib/features/goals/presentation/bloc/goals_state.dart",
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart",
          "lib/features/goals/presentation/pages/goals_list_page.dart",
          "lib/features/goals/presentation/pages/goal_detail_page.dart",
          "lib/features/goals/presentation/pages/create_goal_page.dart",
          "lib/features/goals/presentation/pages/invite_members_page.dart",
          "lib/features/goals/presentation/widgets/goal_card.dart",
          "lib/features/goals/presentation/widgets/goal_progress_indicator.dart",
          "lib/features/goals/presentation/widgets/member_ranking_list.dart",
          "lib/features/goals/presentation/widgets/goal_date_picker.dart"
        ],
        "filesToRead": [
          "lib/core/network/api_client.dart",
          "lib/shared/widgets/app_card.dart",
          "lib/features/sharing/presentation/widgets/friend_list_tile.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-sharing-ui",
          "epic-auth-ui"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Uses LinearProgressIndicator for goal progress",
          "Uses DateRangePicker for goal dates",
          "Implements member rankings with indexed ListView",
          "Uses Hero animations for goal card transitions"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-native-integration",
        "title": "Native Health Platform Integration",
        "description": "Integration with HealthKit (iOS) and Google Fit/Health Connect (Android) using health package. Handles permission requests, step data reading, and background synchronization with the backend.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "pubspec.yaml",
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "filesToCreate": [
          "lib/features/health/data/repositories/health_repository_impl.dart",
          "lib/features/health/data/datasources/health_native_datasource.dart",
          "lib/features/health/data/services/health_sync_service.dart",
          "lib/features/health/domain/entities/health_data.dart",
          "lib/features/health/domain/entities/sync_status.dart",
          "lib/features/health/domain/repositories/health_repository.dart",
          "lib/features/health/domain/usecases/request_permissions_usecase.dart",
          "lib/features/health/domain/usecases/read_steps_usecase.dart",
          "lib/features/health/domain/usecases/sync_steps_usecase.dart",
          "lib/features/health/domain/usecases/get_sync_status_usecase.dart",
          "lib/features/health/presentation/bloc/health_bloc.dart",
          "lib/features/health/presentation/bloc/health_event.dart",
          "lib/features/health/presentation/bloc/health_state.dart",
          "lib/features/health/presentation/pages/health_permissions_page.dart",
          "lib/features/health/presentation/pages/sync_settings_page.dart",
          "lib/features/health/presentation/widgets/permission_request_card.dart",
          "lib/features/health/presentation/widgets/sync_status_indicator.dart",
          "lib/features/health/presentation/widgets/health_source_selector.dart",
          "lib/core/services/background_service.dart",
          "lib/core/services/workmanager_service.dart"
        ],
        "filesToRead": [
          "lib/core/network/api_client.dart",
          "lib/core/storage/secure_storage_service.dart",
          "lib/features/dashboard/data/datasources/steps_remote_datasource.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-dashboard",
          "epic-auth-ui",
          "epic-dashboard"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Uses health package for cross-platform health data access",
          "Implements workmanager for background sync",
          "Uses permission_handler for runtime permissions",
          "Stores last sync timestamp in SecureStorage"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-realtime-client",
        "title": "Real-Time WebSocket & Push Notifications",
        "description": "WebSocket client integration using web_socket_channel for real-time step updates and goal progress. Firebase Cloud Messaging for push notifications on friend requests and goal invitations.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/main.dart",
          "lib/app.dart",
          "pubspec.yaml",
          "android/app/build.gradle",
          "ios/Runner/AppDelegate.swift"
        ],
        "filesToCreate": [
          "lib/features/realtime/data/services/websocket_service.dart",
          "lib/features/realtime/data/services/socket_event_handler.dart",
          "lib/features/realtime/data/models/socket_message_model.dart",
          "lib/features/realtime/domain/entities/socket_event.dart",
          "lib/features/realtime/domain/repositories/realtime_repository.dart",
          "lib/features/realtime/domain/usecases/connect_socket_usecase.dart",
          "lib/features/realtime/domain/usecases/disconnect_socket_usecase.dart",
          "lib/features/realtime/domain/usecases/emit_event_usecase.dart",
          "lib/features/realtime/presentation/bloc/realtime_bloc.dart",
          "lib/features/realtime/presentation/bloc/realtime_event.dart",
          "lib/features/realtime/presentation/bloc/realtime_state.dart",
          "lib/features/realtime/presentation/widgets/connection_status_indicator.dart",
          "lib/features/notifications/data/services/fcm_service.dart",
          "lib/features/notifications/data/services/notification_handler.dart",
          "lib/features/notifications/data/repositories/notification_repository_impl.dart",
          "lib/features/notifications/domain/entities/app_notification.dart",
          "lib/features/notifications/domain/repositories/notification_repository.dart",
          "lib/features/notifications/domain/usecases/initialize_fcm_usecase.dart",
          "lib/features/notifications/domain/usecases/handle_notification_usecase.dart",
          "lib/features/notifications/presentation/bloc/notification_bloc.dart",
          "lib/features/notifications/presentation/pages/notifications_page.dart",
          "lib/features/notifications/presentation/widgets/notification_tile.dart",
          "lib/features/notifications/presentation/widgets/notification_badge.dart"
        ],
        "filesToRead": [
          "lib/core/network/api_client.dart",
          "lib/core/storage/secure_storage_service.dart",
          "lib/features/auth/presentation/bloc/auth_bloc.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-dashboard",
          "epic-sharing-ui",
          "epic-goals-ui",
          "epic-auth-ui",
          "epic-dashboard"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Uses web_socket_channel for WebSocket communication",
          "Uses socket_io_client for Socket.io protocol compatibility",
          "Implements automatic reconnection with exponential backoff",
          "Uses firebase_messaging for push notifications",
          "Uses flutter_local_notifications for foreground notifications"
        ],
        "repoType": "frontend"
      }
    ]
  }
}