{
  "_metadata": {
    "agentType": "planning",
    "taskId": "6d004ee610ab0349eb2a19a6",
    "timestamp": "2026-01-24T03:40:45.275Z",
    "phase": "planning",
    "savedAt": "2026-01-24T03:40:45.275Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "SADAS",
    "taskDescription": "Completar los 9 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nEl frontend debe ir en: project-app-pasos-frontend-flutter (crear nueva estructura)\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nFLUTTER FOUNDATION\n\nSetup de Flutter + estructura del proyecto\n\nConfiguración de dependencias base (provider/bloc, dio, etc.)\n\nPLATFORM CONFIG\n\nConfiguración para iOS/Android\n\nPermisos para Health APIs (HealthKit/Google Fit)\n\nConfiguración de AndroidManifest.xml y Info.plist\n\nUI FOUNDATION\n\nSistema de diseño con Material Design 3\n\nRouting y navegación (go_router)\n\nTema oscuro/claro (ThemeData)\n\nWidgets reutilizables\n\nAUTH UI\n\nPantallas de login, registro y recuperación de contraseña\n\nGestión de estado de autenticación\n\nAlmacenamiento seguro de tokens (flutter_secure_storage)\n\nDASHBOARD\n\nVista principal con contador de pasos\n\nHistorial de actividad\n\nGráficos (fl_chart o charts_flutter)\n\nPull-to-refresh\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)\n\nManejo de reconexión",
    "epicsCount": 9,
    "epics": [
      {
        "id": "epic-flutter-foundation",
        "title": "Flutter Foundation - Project Setup and Core Dependencies",
        "description": "Initialize Flutter project structure with clean architecture, configure essential dependencies (provider/riverpod, dio, go_router, etc.), set up environment configuration, and create base utilities for the entire application.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "lib/main.dart",
          "analysis_options.yaml"
        ],
        "filesToCreate": [
          "lib/core/config/app_config.dart",
          "lib/core/config/environment.dart",
          "lib/core/constants/api_constants.dart",
          "lib/core/constants/app_constants.dart",
          "lib/core/utils/logger.dart",
          "lib/core/utils/validators.dart",
          "lib/core/errors/app_exception.dart",
          "lib/core/errors/failure.dart",
          "lib/core/network/dio_client.dart",
          "lib/core/network/api_interceptor.dart",
          "lib/core/network/network_info.dart",
          "lib/data/models/user_model.dart",
          "lib/data/models/step_model.dart",
          "lib/data/models/sharing_model.dart",
          "lib/data/models/goal_model.dart",
          "lib/data/repositories/base_repository.dart",
          "lib/domain/entities/user.dart",
          "lib/domain/entities/step.dart",
          "lib/domain/entities/sharing_relationship.dart",
          "lib/domain/entities/group_goal.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/models/User.ts",
          "project-app-pasos-backend/src/models/Step.ts",
          "project-app-pasos-backend/src/models/SharingRelationship.ts",
          "project-app-pasos-backend/src/models/GroupGoal.ts"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Clean architecture with data/domain/presentation layers",
          "Dart naming conventions",
          "Environment-based configuration"
        ],
        "stories": [
          {
            "id": "story-flutter-001",
            "title": "Configure pubspec.yaml with all required dependencies",
            "description": "Add all necessary Flutter packages: provider/riverpod, dio, go_router, flutter_secure_storage, health, web_socket_channel, fl_chart, firebase_messaging, intl, freezed, json_serializable",
            "filesToModify": [
              "pubspec.yaml"
            ],
            "priority": 1,
            "complexity": "simple"
          },
          {
            "id": "story-flutter-002",
            "title": "Create core configuration and environment setup",
            "description": "Set up app configuration classes for managing API URLs, environment variables, and app constants for both development and production environments",
            "filesToCreate": [
              "lib/core/config/app_config.dart",
              "lib/core/config/environment.dart",
              "lib/core/constants/api_constants.dart",
              "lib/core/constants/app_constants.dart"
            ],
            "priority": 2,
            "complexity": "simple"
          },
          {
            "id": "story-flutter-003",
            "title": "Implement Dio HTTP client with interceptors",
            "description": "Create configured Dio instance with request/response interceptors for authentication headers, error handling, logging, and token refresh logic",
            "filesToCreate": [
              "lib/core/network/dio_client.dart",
              "lib/core/network/api_interceptor.dart",
              "lib/core/network/network_info.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-flutter-004",
            "title": "Create data models matching backend schemas",
            "description": "Implement Dart data models with JSON serialization matching backend User, Step, SharingRelationship, and GroupGoal MongoDB schemas",
            "filesToCreate": [
              "lib/data/models/user_model.dart",
              "lib/data/models/step_model.dart",
              "lib/data/models/sharing_model.dart",
              "lib/data/models/goal_model.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-flutter-005",
            "title": "Set up error handling and logging utilities",
            "description": "Create custom exception classes, failure types for error handling, and logging utility for debugging",
            "filesToCreate": [
              "lib/core/errors/app_exception.dart",
              "lib/core/errors/failure.dart",
              "lib/core/utils/logger.dart",
              "lib/core/utils/validators.dart"
            ],
            "priority": 5,
            "complexity": "simple"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-platform-config",
        "title": "Platform Configuration - iOS and Android Health API Permissions",
        "description": "Configure native platform settings for iOS (HealthKit) and Android (Google Fit/Health Connect) including permissions, entitlements, and manifest configurations required for accessing step data.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist",
          "android/app/build.gradle"
        ],
        "filesToCreate": [
          "ios/Runner/Runner.entitlements",
          "android/app/src/main/res/values/health_permissions.xml"
        ],
        "filesToRead": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "iOS entitlements for HealthKit",
          "Android manifest permissions for Health Connect",
          "Gradle configuration for health dependencies"
        ],
        "stories": [
          {
            "id": "story-platform-001",
            "title": "Configure iOS HealthKit permissions and entitlements",
            "description": "Add HealthKit entitlements to iOS project, configure Info.plist with NSHealthShareUsageDescription and NSHealthUpdateUsageDescription, and set up HealthKit capability in Xcode project",
            "filesToModify": [
              "ios/Runner/Info.plist"
            ],
            "filesToCreate": [
              "ios/Runner/Runner.entitlements"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-platform-002",
            "title": "Configure Android Health Connect permissions",
            "description": "Add Health Connect permissions to AndroidManifest.xml, configure activity intent filters for health permissions, and set up gradle dependencies for Health Connect API",
            "filesToModify": [
              "android/app/src/main/AndroidManifest.xml",
              "android/app/build.gradle"
            ],
            "filesToCreate": [
              "android/app/src/main/res/values/health_permissions.xml"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-platform-003",
            "title": "Create platform-specific permission request flow",
            "description": "Implement native method channels for requesting health permissions on both platforms with proper user guidance and fallback handling",
            "filesToCreate": [
              "lib/core/platform/health_permissions.dart",
              "lib/core/platform/permission_handler.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-ui-foundation",
        "title": "UI Foundation - Design System and Navigation",
        "description": "Establish the UI foundation including Material Design 3 theme configuration, dark/light mode support, go_router navigation setup, and reusable widget components that will be used throughout the application.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart"
        ],
        "filesToCreate": [
          "lib/core/theme/app_theme.dart",
          "lib/core/theme/app_colors.dart",
          "lib/core/theme/app_typography.dart",
          "lib/core/theme/app_spacing.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/route_names.dart",
          "lib/core/router/route_guards.dart",
          "lib/presentation/widgets/common/app_button.dart",
          "lib/presentation/widgets/common/app_text_field.dart",
          "lib/presentation/widgets/common/app_card.dart",
          "lib/presentation/widgets/common/app_loading.dart",
          "lib/presentation/widgets/common/app_error.dart",
          "lib/presentation/widgets/common/app_avatar.dart",
          "lib/presentation/widgets/common/app_bottom_nav.dart",
          "lib/presentation/widgets/common/empty_state.dart",
          "lib/presentation/widgets/steps/step_counter_widget.dart",
          "lib/presentation/widgets/steps/step_progress_ring.dart"
        ],
        "filesToRead": [],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Material Design 3 theming",
          "go_router declarative routing",
          "Reusable widget composition"
        ],
        "stories": [
          {
            "id": "story-ui-001",
            "title": "Implement Material Design 3 theme system",
            "description": "Create comprehensive theme configuration with ColorScheme, Typography, and component themes supporting both light and dark modes with proper color contrast",
            "filesToCreate": [
              "lib/core/theme/app_theme.dart",
              "lib/core/theme/app_colors.dart",
              "lib/core/theme/app_typography.dart",
              "lib/core/theme/app_spacing.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-ui-002",
            "title": "Set up go_router navigation with route guards",
            "description": "Configure declarative routing with go_router, implement authentication guards, define all app routes, and handle deep linking",
            "filesToCreate": [
              "lib/core/router/app_router.dart",
              "lib/core/router/route_names.dart",
              "lib/core/router/route_guards.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-ui-003",
            "title": "Create reusable common widgets",
            "description": "Build consistent UI components including buttons, text fields, cards, loading indicators, error displays, and avatars following Material Design 3 guidelines",
            "filesToCreate": [
              "lib/presentation/widgets/common/app_button.dart",
              "lib/presentation/widgets/common/app_text_field.dart",
              "lib/presentation/widgets/common/app_card.dart",
              "lib/presentation/widgets/common/app_loading.dart",
              "lib/presentation/widgets/common/app_error.dart",
              "lib/presentation/widgets/common/app_avatar.dart",
              "lib/presentation/widgets/common/empty_state.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-ui-004",
            "title": "Create step-specific display widgets",
            "description": "Build step counter display widget with animated counter, circular progress ring for daily goals, and step visualization components",
            "filesToCreate": [
              "lib/presentation/widgets/steps/step_counter_widget.dart",
              "lib/presentation/widgets/steps/step_progress_ring.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-ui-005",
            "title": "Implement bottom navigation shell",
            "description": "Create bottom navigation bar component with proper state management for tab switching between Dashboard, Friends, Goals, and Profile sections",
            "filesToCreate": [
              "lib/presentation/widgets/common/app_bottom_nav.dart",
              "lib/presentation/pages/shell/main_shell_page.dart"
            ],
            "priority": 5,
            "complexity": "simple"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-auth-ui",
        "title": "Auth UI - Authentication Screens and State Management",
        "description": "Implement complete authentication flow including login, registration, password recovery screens, secure token storage using flutter_secure_storage, and authentication state management with automatic token refresh.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/data/datasources/remote/auth_remote_datasource.dart",
          "lib/data/repositories/auth_repository_impl.dart",
          "lib/domain/repositories/auth_repository.dart",
          "lib/domain/usecases/login_usecase.dart",
          "lib/domain/usecases/register_usecase.dart",
          "lib/domain/usecases/refresh_token_usecase.dart",
          "lib/presentation/providers/auth_provider.dart",
          "lib/presentation/pages/auth/login_page.dart",
          "lib/presentation/pages/auth/register_page.dart",
          "lib/presentation/pages/auth/forgot_password_page.dart",
          "lib/presentation/pages/auth/splash_page.dart",
          "lib/core/storage/secure_storage.dart",
          "lib/core/storage/token_manager.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/auth.routes.ts",
          "project-app-pasos-backend/src/controllers/auth.controller.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-ui-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Repository pattern for data access",
          "Use case pattern for business logic",
          "Provider for state management",
          "Secure token storage"
        ],
        "stories": [
          {
            "id": "story-auth-001",
            "title": "Implement secure token storage",
            "description": "Create secure storage wrapper using flutter_secure_storage for JWT access and refresh tokens with proper encryption and token manager for handling token lifecycle",
            "filesToCreate": [
              "lib/core/storage/secure_storage.dart",
              "lib/core/storage/token_manager.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-002",
            "title": "Create auth repository and data source",
            "description": "Implement authentication data source calling backend /api/auth endpoints (register, login, refresh, me) and repository abstraction following clean architecture",
            "filesToCreate": [
              "lib/data/datasources/remote/auth_remote_datasource.dart",
              "lib/data/repositories/auth_repository_impl.dart",
              "lib/domain/repositories/auth_repository.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-003",
            "title": "Implement auth use cases",
            "description": "Create login, register, and refresh token use cases encapsulating authentication business logic with proper error handling",
            "filesToCreate": [
              "lib/domain/usecases/login_usecase.dart",
              "lib/domain/usecases/register_usecase.dart",
              "lib/domain/usecases/refresh_token_usecase.dart"
            ],
            "priority": 3,
            "complexity": "simple"
          },
          {
            "id": "story-auth-004",
            "title": "Create auth state provider",
            "description": "Implement authentication state management with Provider/Riverpod handling login state, current user, token refresh, and logout functionality",
            "filesToCreate": [
              "lib/presentation/providers/auth_provider.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-005",
            "title": "Build login page with form validation",
            "description": "Create login screen with email/username and password fields, form validation, error display, loading states, and navigation to register/forgot password",
            "filesToCreate": [
              "lib/presentation/pages/auth/login_page.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-006",
            "title": "Build registration page with validation",
            "description": "Create registration screen with username, email, password, confirm password fields, real-time availability checking via /api/users/check endpoints, and proper validation",
            "filesToCreate": [
              "lib/presentation/pages/auth/register_page.dart"
            ],
            "priority": 6,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-007",
            "title": "Build splash and forgot password pages",
            "description": "Create splash screen with auto-login check using stored tokens, and forgot password page with email input for password recovery flow",
            "filesToCreate": [
              "lib/presentation/pages/auth/splash_page.dart",
              "lib/presentation/pages/auth/forgot_password_page.dart"
            ],
            "priority": 7,
            "complexity": "simple"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-dashboard",
        "title": "Dashboard - Step Counter and Activity Visualization",
        "description": "Build the main dashboard screen featuring today's step count display, weekly trend charts using fl_chart, hourly activity breakdown, statistics summary, and pull-to-refresh functionality for syncing latest data.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/data/datasources/remote/steps_remote_datasource.dart",
          "lib/data/repositories/steps_repository_impl.dart",
          "lib/domain/repositories/steps_repository.dart",
          "lib/domain/usecases/get_today_steps_usecase.dart",
          "lib/domain/usecases/get_weekly_trend_usecase.dart",
          "lib/domain/usecases/get_hourly_peaks_usecase.dart",
          "lib/domain/usecases/get_stats_usecase.dart",
          "lib/domain/usecases/record_steps_usecase.dart",
          "lib/presentation/providers/steps_provider.dart",
          "lib/presentation/providers/dashboard_provider.dart",
          "lib/presentation/pages/dashboard/dashboard_page.dart",
          "lib/presentation/widgets/dashboard/today_steps_card.dart",
          "lib/presentation/widgets/dashboard/weekly_chart.dart",
          "lib/presentation/widgets/dashboard/hourly_chart.dart",
          "lib/presentation/widgets/dashboard/stats_summary.dart",
          "lib/presentation/widgets/dashboard/activity_timeline.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/steps.routes.ts",
          "project-app-pasos-backend/src/services/steps.service.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-ui-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "fl_chart for data visualization",
          "Pull-to-refresh pattern",
          "Provider for reactive updates"
        ],
        "stories": [
          {
            "id": "story-dashboard-001",
            "title": "Create steps repository and data source",
            "description": "Implement steps data source calling backend /api/steps endpoints (today, weekly, hourly-peaks, stats, record) with repository abstraction",
            "filesToCreate": [
              "lib/data/datasources/remote/steps_remote_datasource.dart",
              "lib/data/repositories/steps_repository_impl.dart",
              "lib/domain/repositories/steps_repository.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-dashboard-002",
            "title": "Implement steps use cases",
            "description": "Create use cases for getting today's steps, weekly trend, hourly peaks, stats, and recording new steps with proper error handling",
            "filesToCreate": [
              "lib/domain/usecases/get_today_steps_usecase.dart",
              "lib/domain/usecases/get_weekly_trend_usecase.dart",
              "lib/domain/usecases/get_hourly_peaks_usecase.dart",
              "lib/domain/usecases/get_stats_usecase.dart",
              "lib/domain/usecases/record_steps_usecase.dart"
            ],
            "priority": 2,
            "complexity": "simple"
          },
          {
            "id": "story-dashboard-003",
            "title": "Create steps and dashboard providers",
            "description": "Implement state management for step data with caching, loading states, error handling, and automatic refresh capabilities",
            "filesToCreate": [
              "lib/presentation/providers/steps_provider.dart",
              "lib/presentation/providers/dashboard_provider.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-dashboard-004",
            "title": "Build today steps card with animated counter",
            "description": "Create prominent card displaying today's total steps with animated count-up effect, daily goal progress ring, and percentage indicator",
            "filesToCreate": [
              "lib/presentation/widgets/dashboard/today_steps_card.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-dashboard-005",
            "title": "Build weekly trend line chart",
            "description": "Implement interactive line chart using fl_chart showing last 7 days step counts with touch tooltips and animated transitions",
            "filesToCreate": [
              "lib/presentation/widgets/dashboard/weekly_chart.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          },
          {
            "id": "story-dashboard-006",
            "title": "Build hourly activity bar chart",
            "description": "Create bar chart displaying step distribution across 24 hours for selected day with peak hour highlighting",
            "filesToCreate": [
              "lib/presentation/widgets/dashboard/hourly_chart.dart"
            ],
            "priority": 6,
            "complexity": "moderate"
          },
          {
            "id": "story-dashboard-007",
            "title": "Build stats summary and dashboard page",
            "description": "Create stats summary widget showing today/week/month/all-time totals, activity timeline, and assemble complete dashboard page with pull-to-refresh",
            "filesToCreate": [
              "lib/presentation/widgets/dashboard/stats_summary.dart",
              "lib/presentation/widgets/dashboard/activity_timeline.dart",
              "lib/presentation/pages/dashboard/dashboard_page.dart"
            ],
            "priority": 7,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-sharing-ui",
        "title": "Sharing UI - Friends List and Social Features",
        "description": "Implement social sharing features including friends list, friend search, send/accept/reject friend requests, view friends' step activity, and manage sharing permissions with real-time updates.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/data/datasources/remote/sharing_remote_datasource.dart",
          "lib/data/datasources/remote/users_remote_datasource.dart",
          "lib/data/repositories/sharing_repository_impl.dart",
          "lib/data/repositories/users_repository_impl.dart",
          "lib/domain/repositories/sharing_repository.dart",
          "lib/domain/repositories/users_repository.dart",
          "lib/domain/usecases/get_relationships_usecase.dart",
          "lib/domain/usecases/send_friend_request_usecase.dart",
          "lib/domain/usecases/accept_request_usecase.dart",
          "lib/domain/usecases/reject_request_usecase.dart",
          "lib/domain/usecases/search_users_usecase.dart",
          "lib/domain/usecases/get_friend_stats_usecase.dart",
          "lib/presentation/providers/sharing_provider.dart",
          "lib/presentation/providers/users_provider.dart",
          "lib/presentation/pages/sharing/friends_page.dart",
          "lib/presentation/pages/sharing/friend_requests_page.dart",
          "lib/presentation/pages/sharing/search_users_page.dart",
          "lib/presentation/pages/sharing/friend_detail_page.dart",
          "lib/presentation/widgets/sharing/friend_card.dart",
          "lib/presentation/widgets/sharing/friend_request_card.dart",
          "lib/presentation/widgets/sharing/user_search_tile.dart",
          "lib/presentation/widgets/sharing/friend_activity_card.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/sharing.routes.ts",
          "project-app-pasos-backend/src/routes/users.routes.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-dashboard",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Search with debounce",
          "Pull-to-refresh for lists",
          "Optimistic UI updates"
        ],
        "stories": [
          {
            "id": "story-sharing-001",
            "title": "Create sharing and users repositories",
            "description": "Implement data sources and repositories for sharing relationships (/api/sharing) and user search/lookup (/api/users) endpoints",
            "filesToCreate": [
              "lib/data/datasources/remote/sharing_remote_datasource.dart",
              "lib/data/datasources/remote/users_remote_datasource.dart",
              "lib/data/repositories/sharing_repository_impl.dart",
              "lib/data/repositories/users_repository_impl.dart",
              "lib/domain/repositories/sharing_repository.dart",
              "lib/domain/repositories/users_repository.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-002",
            "title": "Implement sharing use cases",
            "description": "Create use cases for getting relationships, sending/accepting/rejecting requests, searching users, and getting friend stats",
            "filesToCreate": [
              "lib/domain/usecases/get_relationships_usecase.dart",
              "lib/domain/usecases/send_friend_request_usecase.dart",
              "lib/domain/usecases/accept_request_usecase.dart",
              "lib/domain/usecases/reject_request_usecase.dart",
              "lib/domain/usecases/search_users_usecase.dart",
              "lib/domain/usecases/get_friend_stats_usecase.dart"
            ],
            "priority": 2,
            "complexity": "simple"
          },
          {
            "id": "story-sharing-003",
            "title": "Create sharing and users providers",
            "description": "Implement state management for friends list, pending requests, user search results with proper loading and error states",
            "filesToCreate": [
              "lib/presentation/providers/sharing_provider.dart",
              "lib/presentation/providers/users_provider.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-004",
            "title": "Build friends list page and components",
            "description": "Create friends list page with tabs for accepted friends and pending requests, friend card widget showing name and recent activity",
            "filesToCreate": [
              "lib/presentation/pages/sharing/friends_page.dart",
              "lib/presentation/widgets/sharing/friend_card.dart",
              "lib/presentation/widgets/sharing/friend_activity_card.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-005",
            "title": "Build friend requests page",
            "description": "Create page showing incoming and outgoing friend requests with accept/reject actions and request card components",
            "filesToCreate": [
              "lib/presentation/pages/sharing/friend_requests_page.dart",
              "lib/presentation/widgets/sharing/friend_request_card.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-006",
            "title": "Build user search page",
            "description": "Create searchable user directory with debounced search input, search results list, and ability to send friend requests",
            "filesToCreate": [
              "lib/presentation/pages/sharing/search_users_page.dart",
              "lib/presentation/widgets/sharing/user_search_tile.dart"
            ],
            "priority": 6,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-007",
            "title": "Build friend detail page",
            "description": "Create detailed friend view showing their step stats, activity history, and sharing management options",
            "filesToCreate": [
              "lib/presentation/pages/sharing/friend_detail_page.dart"
            ],
            "priority": 7,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-goals-ui",
        "title": "Goals UI - Group Goals and Progress Tracking",
        "description": "Implement group goals feature including goal creation, member management, progress visualization with rankings, goal invitations, and real-time progress updates when members contribute steps.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/data/datasources/remote/goals_remote_datasource.dart",
          "lib/data/repositories/goals_repository_impl.dart",
          "lib/domain/repositories/goals_repository.dart",
          "lib/domain/usecases/get_user_goals_usecase.dart",
          "lib/domain/usecases/create_goal_usecase.dart",
          "lib/domain/usecases/get_goal_details_usecase.dart",
          "lib/domain/usecases/get_goal_progress_usecase.dart",
          "lib/domain/usecases/invite_to_goal_usecase.dart",
          "lib/domain/usecases/join_goal_usecase.dart",
          "lib/domain/usecases/leave_goal_usecase.dart",
          "lib/presentation/providers/goals_provider.dart",
          "lib/presentation/pages/goals/goals_list_page.dart",
          "lib/presentation/pages/goals/goal_detail_page.dart",
          "lib/presentation/pages/goals/create_goal_page.dart",
          "lib/presentation/pages/goals/invite_members_page.dart",
          "lib/presentation/widgets/goals/goal_card.dart",
          "lib/presentation/widgets/goals/goal_progress_bar.dart",
          "lib/presentation/widgets/goals/member_ranking_list.dart",
          "lib/presentation/widgets/goals/member_contribution_tile.dart",
          "lib/presentation/widgets/goals/goal_invitation_card.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/goals.routes.ts",
          "project-app-pasos-backend/src/services/goals.service.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-sharing-ui",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Progress visualization",
          "Member ranking display",
          "Form validation for goal creation"
        ],
        "stories": [
          {
            "id": "story-goals-001",
            "title": "Create goals repository and data source",
            "description": "Implement goals data source calling backend /api/goals endpoints (CRUD, invite, join, leave, progress) with repository abstraction",
            "filesToCreate": [
              "lib/data/datasources/remote/goals_remote_datasource.dart",
              "lib/data/repositories/goals_repository_impl.dart",
              "lib/domain/repositories/goals_repository.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-002",
            "title": "Implement goals use cases",
            "description": "Create use cases for listing goals, creating goals, getting details/progress, inviting users, joining and leaving goals",
            "filesToCreate": [
              "lib/domain/usecases/get_user_goals_usecase.dart",
              "lib/domain/usecases/create_goal_usecase.dart",
              "lib/domain/usecases/get_goal_details_usecase.dart",
              "lib/domain/usecases/get_goal_progress_usecase.dart",
              "lib/domain/usecases/invite_to_goal_usecase.dart",
              "lib/domain/usecases/join_goal_usecase.dart",
              "lib/domain/usecases/leave_goal_usecase.dart"
            ],
            "priority": 2,
            "complexity": "simple"
          },
          {
            "id": "story-goals-003",
            "title": "Create goals provider",
            "description": "Implement state management for goals list, current goal details, progress data with real-time update handling",
            "filesToCreate": [
              "lib/presentation/providers/goals_provider.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-004",
            "title": "Build goals list page and goal card",
            "description": "Create goals list page showing active and completed goals with goal card widget displaying title, progress, dates, and member count",
            "filesToCreate": [
              "lib/presentation/pages/goals/goals_list_page.dart",
              "lib/presentation/widgets/goals/goal_card.dart",
              "lib/presentation/widgets/goals/goal_invitation_card.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-005",
            "title": "Build goal detail page with progress",
            "description": "Create comprehensive goal detail view with progress bar, member rankings, contribution breakdown, and action buttons",
            "filesToCreate": [
              "lib/presentation/pages/goals/goal_detail_page.dart",
              "lib/presentation/widgets/goals/goal_progress_bar.dart",
              "lib/presentation/widgets/goals/member_ranking_list.dart",
              "lib/presentation/widgets/goals/member_contribution_tile.dart"
            ],
            "priority": 5,
            "complexity": "complex"
          },
          {
            "id": "story-goals-006",
            "title": "Build create goal page",
            "description": "Create goal creation form with title, description, target steps, date range picker, and validation",
            "filesToCreate": [
              "lib/presentation/pages/goals/create_goal_page.dart"
            ],
            "priority": 6,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-007",
            "title": "Build invite members page",
            "description": "Create member invitation page with friend selection, search, and pending invitation display for goal creators",
            "filesToCreate": [
              "lib/presentation/pages/goals/invite_members_page.dart"
            ],
            "priority": 7,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-native-integration",
        "title": "Native Integration - Health API Step Tracking",
        "description": "Implement native step data integration using the health package to read steps from HealthKit (iOS) and Google Fit/Health Connect (Android), with background sync capabilities and data normalization.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "filesToCreate": [
          "lib/data/datasources/local/health_datasource.dart",
          "lib/data/repositories/health_repository_impl.dart",
          "lib/domain/repositories/health_repository.dart",
          "lib/domain/usecases/get_native_steps_usecase.dart",
          "lib/domain/usecases/sync_steps_to_backend_usecase.dart",
          "lib/presentation/providers/health_provider.dart",
          "lib/core/services/health_service.dart",
          "lib/core/services/background_sync_service.dart",
          "lib/core/services/step_aggregator.dart",
          "lib/presentation/pages/settings/health_permissions_page.dart",
          "lib/presentation/widgets/health/health_status_widget.dart",
          "lib/presentation/widgets/health/sync_status_widget.dart"
        ],
        "filesToRead": [
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-platform-config",
          "epic-dashboard",
          "epic-flutter-foundation",
          "epic-platform-config"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Health package abstraction",
          "Background task scheduling",
          "Platform-specific permission flows"
        ],
        "stories": [
          {
            "id": "story-native-001",
            "title": "Implement health service wrapper",
            "description": "Create abstraction layer over health package that provides unified interface for reading step data from HealthKit and Google Fit with proper error handling",
            "filesToCreate": [
              "lib/core/services/health_service.dart",
              "lib/core/services/step_aggregator.dart"
            ],
            "priority": 1,
            "complexity": "complex"
          },
          {
            "id": "story-native-002",
            "title": "Create health repository and data source",
            "description": "Implement local health data source using health package and repository for accessing native step counts with caching",
            "filesToCreate": [
              "lib/data/datasources/local/health_datasource.dart",
              "lib/data/repositories/health_repository_impl.dart",
              "lib/domain/repositories/health_repository.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-native-003",
            "title": "Implement native steps use cases",
            "description": "Create use cases for fetching native step data and syncing to backend API with conflict resolution",
            "filesToCreate": [
              "lib/domain/usecases/get_native_steps_usecase.dart",
              "lib/domain/usecases/sync_steps_to_backend_usecase.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-native-004",
            "title": "Create health provider",
            "description": "Implement state management for health permission status, native step data, and sync status with reactive updates",
            "filesToCreate": [
              "lib/presentation/providers/health_provider.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-native-005",
            "title": "Implement background sync service",
            "description": "Create background sync service that periodically reads native step data and uploads to backend even when app is backgrounded",
            "filesToCreate": [
              "lib/core/services/background_sync_service.dart"
            ],
            "priority": 5,
            "complexity": "complex"
          },
          {
            "id": "story-native-006",
            "title": "Build health permissions page",
            "description": "Create settings page for managing health permissions with status display, permission request flow, and troubleshooting guidance",
            "filesToCreate": [
              "lib/presentation/pages/settings/health_permissions_page.dart",
              "lib/presentation/widgets/health/health_status_widget.dart",
              "lib/presentation/widgets/health/sync_status_widget.dart"
            ],
            "priority": 6,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      },
      {
        "id": "epic-realtime-client",
        "title": "Real-time Client - WebSocket and Push Notifications",
        "description": "Implement real-time features using web_socket_channel for WebSocket connections to receive live step updates and goal progress, plus Firebase Cloud Messaging for push notifications on friend requests and goal completions.",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "android/app/build.gradle",
          "ios/Runner/AppDelegate.swift"
        ],
        "filesToCreate": [
          "lib/core/services/websocket_service.dart",
          "lib/core/services/websocket_manager.dart",
          "lib/core/services/notification_service.dart",
          "lib/core/services/firebase_messaging_service.dart",
          "lib/data/datasources/remote/websocket_datasource.dart",
          "lib/presentation/providers/realtime_provider.dart",
          "lib/presentation/providers/notification_provider.dart",
          "lib/presentation/pages/settings/notification_settings_page.dart",
          "lib/presentation/widgets/notifications/notification_badge.dart",
          "lib/presentation/widgets/realtime/connection_status.dart",
          "android/app/google-services.json",
          "ios/Runner/GoogleService-Info.plist",
          "ios/firebase_app_id_file.json"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/socket/types.ts",
          "project-app-pasos-backend/src/socket/handlers/sharing.handler.ts",
          "project-app-pasos-backend/src/socket/handlers/goals.handler.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-sharing-ui",
          "epic-goals-ui",
          "epic-flutter-foundation",
          "epic-platform-config"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "WebSocket with auto-reconnection",
          "Firebase messaging integration",
          "Event-driven state updates"
        ],
        "stories": [
          {
            "id": "story-realtime-001",
            "title": "Implement WebSocket service with reconnection",
            "description": "Create WebSocket service using web_socket_channel that connects to backend Socket.io server with JWT authentication, automatic reconnection on disconnect, and heartbeat handling",
            "filesToCreate": [
              "lib/core/services/websocket_service.dart",
              "lib/core/services/websocket_manager.dart"
            ],
            "priority": 1,
            "complexity": "complex"
          },
          {
            "id": "story-realtime-002",
            "title": "Create WebSocket data source and event handlers",
            "description": "Implement WebSocket data source that listens for steps-updated, goal-progress, sharing:joined events and dispatches to appropriate handlers",
            "filesToCreate": [
              "lib/data/datasources/remote/websocket_datasource.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-realtime-003",
            "title": "Create realtime provider",
            "description": "Implement state management for WebSocket connection status, incoming real-time events, and event dispatch to other providers",
            "filesToCreate": [
              "lib/presentation/providers/realtime_provider.dart",
              "lib/presentation/widgets/realtime/connection_status.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-realtime-004",
            "title": "Implement Firebase messaging service",
            "description": "Set up Firebase Cloud Messaging for push notifications including foreground/background handling, token management, and notification display",
            "filesToCreate": [
              "lib/core/services/notification_service.dart",
              "lib/core/services/firebase_messaging_service.dart"
            ],
            "priority": 4,
            "complexity": "complex"
          },
          {
            "id": "story-realtime-005",
            "title": "Configure Firebase for iOS and Android",
            "description": "Add Firebase configuration files, update gradle and iOS settings for FCM, and implement AppDelegate/Application class changes",
            "filesToModify": [
              "android/app/build.gradle"
            ],
            "filesToCreate": [
              "android/app/google-services.json",
              "ios/Runner/GoogleService-Info.plist",
              "ios/firebase_app_id_file.json"
            ],
            "priority": 5,
            "complexity": "moderate"
          },
          {
            "id": "story-realtime-006",
            "title": "Create notification provider and UI",
            "description": "Implement notification state management, notification badge widget for unread counts, and notification settings page",
            "filesToCreate": [
              "lib/presentation/providers/notification_provider.dart",
              "lib/presentation/widgets/notifications/notification_badge.dart",
              "lib/presentation/pages/settings/notification_settings_page.dart"
            ],
            "priority": 6,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend",
        "sandboxConfig": {
          "language": "Dart",
          "installCmd": "/opt/flutter/bin/flutter pub get",
          "devCmd": "/opt/flutter/bin/flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
          "devPort": 8080
        }
      }
    ]
  }
}