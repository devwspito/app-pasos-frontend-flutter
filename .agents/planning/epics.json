{
  "_metadata": {
    "agentType": "planning",
    "taskId": "2ff781736c9f12b7376700e2",
    "timestamp": "2026-01-23T14:35:27.049Z",
    "phase": "planning",
    "savedAt": "2026-01-23T14:35:27.049Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "fin12412",
    "taskDescription": "Descripción de tareas para completar el frontend en Flutter\n\nCompletar los 9 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nEl frontend debe ir en: project-app-pasos-frontend-flutter (crear nueva estructura)\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nFLUTTER FOUNDATION\n\nSetup de Flutter + estructura del proyecto\n\nConfiguración de dependencias base (provider/bloc, dio, etc.)\n\nPLATFORM CONFIG\n\nConfiguración para iOS/Android\n\nPermisos para Health APIs (HealthKit/Google Fit)\n\nConfiguración de AndroidManifest.xml y Info.plist\n\nUI FOUNDATION\n\nSistema de diseño con Material Design 3\n\nRouting y navegación (go_router)\n\nTema oscuro/claro (ThemeData)\n\nWidgets reutilizables\n\nAUTH UI\n\nPantallas de login, registro y recuperación de contraseña\n\nGestión de estado de autenticación\n\nAlmacenamiento seguro de tokens (flutter_secure_storage)\n\nDASHBOARD\n\nVista principal con contador de pasos\n\nHistorial de actividad\n\nGráficos (fl_chart o charts_flutter)\n\nPull-to-refresh\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)\n\nManejo de reconexión",
    "epicsCount": 9,
    "epics": [
      {
        "id": "epic-flutter-foundation",
        "title": "Flutter Foundation & Project Structure",
        "description": "Setup Flutter project structure with Clean Architecture, configure dependency injection, create base networking layer with Dio interceptors, and establish the foundational architecture patterns",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/core/di/injection_container.dart",
          "lib/core/di/modules/network_module.dart",
          "lib/core/di/modules/storage_module.dart",
          "lib/core/network/api_client.dart",
          "lib/core/network/api_endpoints.dart",
          "lib/core/network/interceptors/auth_interceptor.dart",
          "lib/core/network/interceptors/logging_interceptor.dart",
          "lib/core/network/interceptors/error_interceptor.dart",
          "lib/core/storage/secure_storage_service.dart",
          "lib/core/storage/local_storage_service.dart",
          "lib/core/constants/app_constants.dart",
          "lib/core/constants/storage_keys.dart",
          "lib/app.dart",
          "lib/features/shared/data/models/api_response.dart",
          "lib/features/shared/data/models/pagination.dart",
          "analysis_options.yaml"
        ],
        "filesToRead": [
          "lib/core/errors/app_exception.dart",
          "lib/core/errors/failure.dart",
          "lib/core/config/environment.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Uses existing AppException and Failure patterns",
          "Extends Environment configuration",
          "Uses get_it for DI as already in pubspec"
        ],
        "stories": [
          {
            "id": "story-foundation-di",
            "title": "Setup dependency injection container",
            "description": "Create injection_container.dart with get_it setup, register all singletons and factories",
            "filesToCreate": [
              "lib/core/di/injection_container.dart",
              "lib/core/di/modules/network_module.dart",
              "lib/core/di/modules/storage_module.dart"
            ],
            "priority": 1,
            "complexity": "simple"
          },
          {
            "id": "story-foundation-network",
            "title": "Create API client with Dio interceptors",
            "description": "Setup Dio with base URL, auth interceptor for token injection, error interceptor using AppException, and logging interceptor",
            "filesToCreate": [
              "lib/core/network/api_client.dart",
              "lib/core/network/api_endpoints.dart",
              "lib/core/network/interceptors/auth_interceptor.dart",
              "lib/core/network/interceptors/logging_interceptor.dart",
              "lib/core/network/interceptors/error_interceptor.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-foundation-storage",
            "title": "Implement secure and local storage services",
            "description": "Create storage services using flutter_secure_storage for tokens and shared_preferences for settings",
            "filesToCreate": [
              "lib/core/storage/secure_storage_service.dart",
              "lib/core/storage/local_storage_service.dart",
              "lib/core/constants/storage_keys.dart"
            ],
            "priority": 3,
            "complexity": "simple"
          },
          {
            "id": "story-foundation-app",
            "title": "Create main app entry point",
            "description": "Setup App widget with MaterialApp, providers, and initial configuration",
            "filesToModify": [
              "lib/main.dart"
            ],
            "filesToCreate": [
              "lib/app.dart",
              "lib/core/constants/app_constants.dart"
            ],
            "priority": 4,
            "complexity": "simple"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-platform-config",
        "title": "Platform Configuration for Health APIs",
        "description": "Configure iOS and Android platforms for health data access including HealthKit, Google Fit, and Health Connect permissions",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "android/app/src/main/AndroidManifest.xml",
          "ios/Runner/Info.plist"
        ],
        "filesToCreate": [
          "lib/core/platform/health_permissions.dart",
          "lib/core/platform/platform_info.dart",
          "android/app/src/main/kotlin/com/example/app/MainActivity.kt",
          "ios/Runner/Runner.entitlements"
        ],
        "filesToRead": [
          "pubspec.yaml"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Uses platform channels for native integration",
          "Follows Flutter health package patterns"
        ],
        "stories": [
          {
            "id": "story-platform-pubspec",
            "title": "Add health and platform dependencies",
            "description": "Add health, permission_handler, and device_info_plus packages to pubspec.yaml",
            "filesToModify": [
              "pubspec.yaml"
            ],
            "priority": 1,
            "complexity": "simple"
          },
          {
            "id": "story-platform-android",
            "title": "Configure Android permissions and manifest",
            "description": "Add Google Fit and Health Connect permissions to AndroidManifest.xml, configure activity recognition",
            "filesToModify": [
              "android/app/src/main/AndroidManifest.xml"
            ],
            "filesToCreate": [
              "android/app/src/main/kotlin/com/example/app/MainActivity.kt"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-platform-ios",
            "title": "Configure iOS HealthKit permissions",
            "description": "Add HealthKit capability and usage descriptions to Info.plist and entitlements",
            "filesToModify": [
              "ios/Runner/Info.plist"
            ],
            "filesToCreate": [
              "ios/Runner/Runner.entitlements"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-platform-service",
            "title": "Create health permissions service",
            "description": "Implement cross-platform health permissions handling with graceful fallbacks",
            "filesToCreate": [
              "lib/core/platform/health_permissions.dart",
              "lib/core/platform/platform_info.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-ui-foundation",
        "title": "UI Foundation & Design System",
        "description": "Implement Material Design 3 theming, navigation with go_router, and reusable widget library",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "lib/app.dart"
        ],
        "filesToCreate": [
          "lib/core/theme/app_theme.dart",
          "lib/core/theme/app_colors.dart",
          "lib/core/theme/app_typography.dart",
          "lib/core/theme/app_spacing.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/routes.dart",
          "lib/core/router/guards/auth_guard.dart",
          "lib/features/shared/presentation/widgets/app_scaffold.dart",
          "lib/features/shared/presentation/widgets/app_button.dart",
          "lib/features/shared/presentation/widgets/app_text_field.dart",
          "lib/features/shared/presentation/widgets/app_card.dart",
          "lib/features/shared/presentation/widgets/app_loading.dart",
          "lib/features/shared/presentation/widgets/app_error_widget.dart",
          "lib/features/shared/presentation/widgets/app_empty_state.dart",
          "lib/features/shared/presentation/widgets/app_bottom_nav.dart"
        ],
        "filesToRead": [
          "lib/core/config/environment.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Material Design 3 guidelines",
          "go_router navigation patterns",
          "Reusable widget composition"
        ],
        "stories": [
          {
            "id": "story-ui-theme",
            "title": "Create Material Design 3 theme system",
            "description": "Implement light and dark themes with color schemes, typography, and spacing constants",
            "filesToCreate": [
              "lib/core/theme/app_theme.dart",
              "lib/core/theme/app_colors.dart",
              "lib/core/theme/app_typography.dart",
              "lib/core/theme/app_spacing.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-ui-router",
            "title": "Setup go_router navigation",
            "description": "Create router configuration with routes, path parameters, and auth guard",
            "filesToModify": [
              "pubspec.yaml"
            ],
            "filesToCreate": [
              "lib/core/router/app_router.dart",
              "lib/core/router/routes.dart",
              "lib/core/router/guards/auth_guard.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-ui-widgets",
            "title": "Create reusable widget library",
            "description": "Build common widgets: buttons, text fields, cards, loading states, error states, empty states",
            "filesToCreate": [
              "lib/features/shared/presentation/widgets/app_scaffold.dart",
              "lib/features/shared/presentation/widgets/app_button.dart",
              "lib/features/shared/presentation/widgets/app_text_field.dart",
              "lib/features/shared/presentation/widgets/app_card.dart",
              "lib/features/shared/presentation/widgets/app_loading.dart",
              "lib/features/shared/presentation/widgets/app_error_widget.dart",
              "lib/features/shared/presentation/widgets/app_empty_state.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-ui-navigation",
            "title": "Create bottom navigation and scaffold",
            "description": "Build main navigation bar and app scaffold with drawer support",
            "filesToCreate": [
              "lib/features/shared/presentation/widgets/app_bottom_nav.dart"
            ],
            "filesToModify": [
              "lib/app.dart"
            ],
            "priority": 4,
            "complexity": "simple"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-auth-ui",
        "title": "Authentication UI & State Management",
        "description": "Implement login, registration, and password recovery screens with secure token management and auth state",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/features/auth/data/datasources/auth_remote_datasource.dart",
          "lib/features/auth/data/datasources/auth_local_datasource.dart",
          "lib/features/auth/data/repositories/auth_repository_impl.dart",
          "lib/features/auth/data/models/user_model.dart",
          "lib/features/auth/data/models/auth_tokens_model.dart",
          "lib/features/auth/data/models/login_request.dart",
          "lib/features/auth/data/models/register_request.dart",
          "lib/features/auth/domain/entities/user.dart",
          "lib/features/auth/domain/entities/auth_tokens.dart",
          "lib/features/auth/domain/repositories/auth_repository.dart",
          "lib/features/auth/domain/usecases/login_usecase.dart",
          "lib/features/auth/domain/usecases/register_usecase.dart",
          "lib/features/auth/domain/usecases/logout_usecase.dart",
          "lib/features/auth/domain/usecases/get_current_user_usecase.dart",
          "lib/features/auth/domain/usecases/refresh_token_usecase.dart",
          "lib/features/auth/presentation/providers/auth_provider.dart",
          "lib/features/auth/presentation/providers/auth_state.dart",
          "lib/features/auth/presentation/pages/login_page.dart",
          "lib/features/auth/presentation/pages/register_page.dart",
          "lib/features/auth/presentation/pages/forgot_password_page.dart",
          "lib/features/auth/presentation/pages/splash_page.dart",
          "lib/features/auth/presentation/widgets/auth_form.dart",
          "lib/features/auth/presentation/widgets/social_login_buttons.dart"
        ],
        "filesToRead": [
          "lib/core/errors/failure.dart",
          "lib/core/utils/validators.dart",
          "lib/core/storage/secure_storage_service.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-ui-foundation",
          "epic-flutter-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Clean Architecture layers",
          "Result pattern for error handling",
          "Secure token storage with flutter_secure_storage"
        ],
        "stories": [
          {
            "id": "story-auth-domain",
            "title": "Create auth domain layer",
            "description": "Define User and AuthTokens entities, repository interface, and use cases",
            "filesToCreate": [
              "lib/features/auth/domain/entities/user.dart",
              "lib/features/auth/domain/entities/auth_tokens.dart",
              "lib/features/auth/domain/repositories/auth_repository.dart",
              "lib/features/auth/domain/usecases/login_usecase.dart",
              "lib/features/auth/domain/usecases/register_usecase.dart",
              "lib/features/auth/domain/usecases/logout_usecase.dart",
              "lib/features/auth/domain/usecases/get_current_user_usecase.dart",
              "lib/features/auth/domain/usecases/refresh_token_usecase.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-data",
            "title": "Implement auth data layer",
            "description": "Create remote datasource for API calls, local datasource for token storage, and repository implementation",
            "filesToCreate": [
              "lib/features/auth/data/datasources/auth_remote_datasource.dart",
              "lib/features/auth/data/datasources/auth_local_datasource.dart",
              "lib/features/auth/data/repositories/auth_repository_impl.dart",
              "lib/features/auth/data/models/user_model.dart",
              "lib/features/auth/data/models/auth_tokens_model.dart",
              "lib/features/auth/data/models/login_request.dart",
              "lib/features/auth/data/models/register_request.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-state",
            "title": "Create auth state management",
            "description": "Implement auth provider with login/logout/refresh states and persistence",
            "filesToCreate": [
              "lib/features/auth/presentation/providers/auth_provider.dart",
              "lib/features/auth/presentation/providers/auth_state.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-auth-pages",
            "title": "Build auth UI pages",
            "description": "Create login, register, forgot password, and splash screens with form validation",
            "filesToCreate": [
              "lib/features/auth/presentation/pages/login_page.dart",
              "lib/features/auth/presentation/pages/register_page.dart",
              "lib/features/auth/presentation/pages/forgot_password_page.dart",
              "lib/features/auth/presentation/pages/splash_page.dart",
              "lib/features/auth/presentation/widgets/auth_form.dart",
              "lib/features/auth/presentation/widgets/social_login_buttons.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-dashboard",
        "title": "Dashboard & Steps Tracking UI",
        "description": "Build the main dashboard with step counter, daily/weekly history, hourly breakdown charts, and pull-to-refresh",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/features/steps/data/datasources/steps_remote_datasource.dart",
          "lib/features/steps/data/datasources/steps_local_datasource.dart",
          "lib/features/steps/data/repositories/steps_repository_impl.dart",
          "lib/features/steps/data/models/step_model.dart",
          "lib/features/steps/data/models/step_stats_model.dart",
          "lib/features/steps/data/models/weekly_trend_model.dart",
          "lib/features/steps/data/models/hourly_peaks_model.dart",
          "lib/features/steps/domain/entities/step_record.dart",
          "lib/features/steps/domain/entities/step_stats.dart",
          "lib/features/steps/domain/entities/weekly_trend.dart",
          "lib/features/steps/domain/entities/hourly_peak.dart",
          "lib/features/steps/domain/repositories/steps_repository.dart",
          "lib/features/steps/domain/usecases/get_today_steps_usecase.dart",
          "lib/features/steps/domain/usecases/get_weekly_trend_usecase.dart",
          "lib/features/steps/domain/usecases/get_hourly_peaks_usecase.dart",
          "lib/features/steps/domain/usecases/get_stats_usecase.dart",
          "lib/features/steps/domain/usecases/record_steps_usecase.dart",
          "lib/features/steps/presentation/providers/steps_provider.dart",
          "lib/features/steps/presentation/providers/steps_state.dart",
          "lib/features/steps/presentation/pages/dashboard_page.dart",
          "lib/features/steps/presentation/pages/history_page.dart",
          "lib/features/steps/presentation/pages/stats_page.dart",
          "lib/features/steps/presentation/widgets/step_counter_card.dart",
          "lib/features/steps/presentation/widgets/daily_progress_ring.dart",
          "lib/features/steps/presentation/widgets/weekly_chart.dart",
          "lib/features/steps/presentation/widgets/hourly_chart.dart",
          "lib/features/steps/presentation/widgets/stats_summary_card.dart",
          "lib/features/steps/presentation/widgets/activity_list_item.dart"
        ],
        "filesToRead": [
          "lib/core/errors/failure.dart",
          "lib/core/extensions/datetime_extensions.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-ui-foundation",
          "epic-auth-ui",
          "epic-flutter-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Clean Architecture layers",
          "Uses fl_chart for visualizations",
          "Pull-to-refresh with RefreshIndicator"
        ],
        "stories": [
          {
            "id": "story-dashboard-domain",
            "title": "Create steps domain layer",
            "description": "Define step entities, repository interface, and use cases for steps operations",
            "filesToCreate": [
              "lib/features/steps/domain/entities/step_record.dart",
              "lib/features/steps/domain/entities/step_stats.dart",
              "lib/features/steps/domain/entities/weekly_trend.dart",
              "lib/features/steps/domain/entities/hourly_peak.dart",
              "lib/features/steps/domain/repositories/steps_repository.dart",
              "lib/features/steps/domain/usecases/get_today_steps_usecase.dart",
              "lib/features/steps/domain/usecases/get_weekly_trend_usecase.dart",
              "lib/features/steps/domain/usecases/get_hourly_peaks_usecase.dart",
              "lib/features/steps/domain/usecases/get_stats_usecase.dart",
              "lib/features/steps/domain/usecases/record_steps_usecase.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-dashboard-data",
            "title": "Implement steps data layer",
            "description": "Create remote datasource, local cache datasource, models, and repository implementation",
            "filesToCreate": [
              "lib/features/steps/data/datasources/steps_remote_datasource.dart",
              "lib/features/steps/data/datasources/steps_local_datasource.dart",
              "lib/features/steps/data/repositories/steps_repository_impl.dart",
              "lib/features/steps/data/models/step_model.dart",
              "lib/features/steps/data/models/step_stats_model.dart",
              "lib/features/steps/data/models/weekly_trend_model.dart",
              "lib/features/steps/data/models/hourly_peaks_model.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-dashboard-state",
            "title": "Create steps state management",
            "description": "Implement steps provider with loading, data, and error states",
            "filesToCreate": [
              "lib/features/steps/presentation/providers/steps_provider.dart",
              "lib/features/steps/presentation/providers/steps_state.dart"
            ],
            "priority": 3,
            "complexity": "simple"
          },
          {
            "id": "story-dashboard-widgets",
            "title": "Build step visualization widgets",
            "description": "Create step counter card, progress ring, weekly/hourly charts using fl_chart",
            "filesToModify": [
              "pubspec.yaml"
            ],
            "filesToCreate": [
              "lib/features/steps/presentation/widgets/step_counter_card.dart",
              "lib/features/steps/presentation/widgets/daily_progress_ring.dart",
              "lib/features/steps/presentation/widgets/weekly_chart.dart",
              "lib/features/steps/presentation/widgets/hourly_chart.dart",
              "lib/features/steps/presentation/widgets/stats_summary_card.dart",
              "lib/features/steps/presentation/widgets/activity_list_item.dart"
            ],
            "priority": 4,
            "complexity": "complex"
          },
          {
            "id": "story-dashboard-pages",
            "title": "Build dashboard and history pages",
            "description": "Create main dashboard page, history page, and stats page with pull-to-refresh",
            "filesToCreate": [
              "lib/features/steps/presentation/pages/dashboard_page.dart",
              "lib/features/steps/presentation/pages/history_page.dart",
              "lib/features/steps/presentation/pages/stats_page.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-sharing-ui",
        "title": "Sharing & Friends Management UI",
        "description": "Build friend list, sharing requests, and friend activity views for social step tracking",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/features/sharing/data/datasources/sharing_remote_datasource.dart",
          "lib/features/sharing/data/repositories/sharing_repository_impl.dart",
          "lib/features/sharing/data/models/sharing_relationship_model.dart",
          "lib/features/sharing/data/models/friend_stats_model.dart",
          "lib/features/sharing/domain/entities/sharing_relationship.dart",
          "lib/features/sharing/domain/entities/friend_stats.dart",
          "lib/features/sharing/domain/repositories/sharing_repository.dart",
          "lib/features/sharing/domain/usecases/get_relationships_usecase.dart",
          "lib/features/sharing/domain/usecases/send_request_usecase.dart",
          "lib/features/sharing/domain/usecases/accept_request_usecase.dart",
          "lib/features/sharing/domain/usecases/reject_request_usecase.dart",
          "lib/features/sharing/domain/usecases/revoke_sharing_usecase.dart",
          "lib/features/sharing/domain/usecases/get_friend_stats_usecase.dart",
          "lib/features/sharing/presentation/providers/sharing_provider.dart",
          "lib/features/sharing/presentation/providers/sharing_state.dart",
          "lib/features/sharing/presentation/pages/friends_page.dart",
          "lib/features/sharing/presentation/pages/friend_requests_page.dart",
          "lib/features/sharing/presentation/pages/friend_activity_page.dart",
          "lib/features/sharing/presentation/pages/add_friend_page.dart",
          "lib/features/sharing/presentation/widgets/friend_list_item.dart",
          "lib/features/sharing/presentation/widgets/friend_request_card.dart",
          "lib/features/sharing/presentation/widgets/friend_stats_card.dart",
          "lib/features/sharing/presentation/widgets/user_search_delegate.dart"
        ],
        "filesToRead": [
          "lib/core/errors/failure.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-ui-foundation",
          "epic-auth-ui",
          "epic-dashboard",
          "epic-flutter-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Clean Architecture layers",
          "Search delegate pattern for user search",
          "Card-based friend list UI"
        ],
        "stories": [
          {
            "id": "story-sharing-domain",
            "title": "Create sharing domain layer",
            "description": "Define sharing relationship and friend stats entities, repository interface, and use cases",
            "filesToCreate": [
              "lib/features/sharing/domain/entities/sharing_relationship.dart",
              "lib/features/sharing/domain/entities/friend_stats.dart",
              "lib/features/sharing/domain/repositories/sharing_repository.dart",
              "lib/features/sharing/domain/usecases/get_relationships_usecase.dart",
              "lib/features/sharing/domain/usecases/send_request_usecase.dart",
              "lib/features/sharing/domain/usecases/accept_request_usecase.dart",
              "lib/features/sharing/domain/usecases/reject_request_usecase.dart",
              "lib/features/sharing/domain/usecases/revoke_sharing_usecase.dart",
              "lib/features/sharing/domain/usecases/get_friend_stats_usecase.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-data",
            "title": "Implement sharing data layer",
            "description": "Create remote datasource, models, and repository implementation",
            "filesToCreate": [
              "lib/features/sharing/data/datasources/sharing_remote_datasource.dart",
              "lib/features/sharing/data/repositories/sharing_repository_impl.dart",
              "lib/features/sharing/data/models/sharing_relationship_model.dart",
              "lib/features/sharing/data/models/friend_stats_model.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-state",
            "title": "Create sharing state management",
            "description": "Implement sharing provider with relationship lists and friend stats",
            "filesToCreate": [
              "lib/features/sharing/presentation/providers/sharing_provider.dart",
              "lib/features/sharing/presentation/providers/sharing_state.dart"
            ],
            "priority": 3,
            "complexity": "simple"
          },
          {
            "id": "story-sharing-widgets",
            "title": "Build sharing UI widgets",
            "description": "Create friend list items, request cards, stats cards, and user search delegate",
            "filesToCreate": [
              "lib/features/sharing/presentation/widgets/friend_list_item.dart",
              "lib/features/sharing/presentation/widgets/friend_request_card.dart",
              "lib/features/sharing/presentation/widgets/friend_stats_card.dart",
              "lib/features/sharing/presentation/widgets/user_search_delegate.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-sharing-pages",
            "title": "Build sharing pages",
            "description": "Create friends list, requests, activity, and add friend pages",
            "filesToCreate": [
              "lib/features/sharing/presentation/pages/friends_page.dart",
              "lib/features/sharing/presentation/pages/friend_requests_page.dart",
              "lib/features/sharing/presentation/pages/friend_activity_page.dart",
              "lib/features/sharing/presentation/pages/add_friend_page.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-goals-ui",
        "title": "Group Goals & Rankings UI",
        "description": "Build group goals management with creation, invitations, progress tracking, and leaderboards",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/features/goals/data/datasources/goals_remote_datasource.dart",
          "lib/features/goals/data/repositories/goals_repository_impl.dart",
          "lib/features/goals/data/models/group_goal_model.dart",
          "lib/features/goals/data/models/goal_membership_model.dart",
          "lib/features/goals/data/models/goal_progress_model.dart",
          "lib/features/goals/data/models/create_goal_request.dart",
          "lib/features/goals/domain/entities/group_goal.dart",
          "lib/features/goals/domain/entities/goal_membership.dart",
          "lib/features/goals/domain/entities/goal_progress.dart",
          "lib/features/goals/domain/repositories/goals_repository.dart",
          "lib/features/goals/domain/usecases/get_user_goals_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_details_usecase.dart",
          "lib/features/goals/domain/usecases/create_goal_usecase.dart",
          "lib/features/goals/domain/usecases/invite_user_usecase.dart",
          "lib/features/goals/domain/usecases/join_goal_usecase.dart",
          "lib/features/goals/domain/usecases/leave_goal_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_progress_usecase.dart",
          "lib/features/goals/presentation/providers/goals_provider.dart",
          "lib/features/goals/presentation/providers/goals_state.dart",
          "lib/features/goals/presentation/providers/goal_detail_provider.dart",
          "lib/features/goals/presentation/pages/goals_list_page.dart",
          "lib/features/goals/presentation/pages/goal_detail_page.dart",
          "lib/features/goals/presentation/pages/create_goal_page.dart",
          "lib/features/goals/presentation/pages/goal_invitations_page.dart",
          "lib/features/goals/presentation/pages/goal_leaderboard_page.dart",
          "lib/features/goals/presentation/widgets/goal_card.dart",
          "lib/features/goals/presentation/widgets/goal_progress_card.dart",
          "lib/features/goals/presentation/widgets/member_list_item.dart",
          "lib/features/goals/presentation/widgets/leaderboard_item.dart",
          "lib/features/goals/presentation/widgets/goal_form.dart",
          "lib/features/goals/presentation/widgets/invite_member_dialog.dart"
        ],
        "filesToRead": [
          "lib/core/errors/failure.dart",
          "lib/core/extensions/datetime_extensions.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-ui-foundation",
          "epic-auth-ui",
          "epic-dashboard",
          "epic-flutter-foundation",
          "epic-ui-foundation"
        ],
        "executionOrder": 3,
        "followsPatterns": [
          "Clean Architecture layers",
          "Dialog pattern for invitations",
          "Progress indicators and leaderboards"
        ],
        "stories": [
          {
            "id": "story-goals-domain",
            "title": "Create goals domain layer",
            "description": "Define goal entities, repository interface, and use cases for goal operations",
            "filesToCreate": [
              "lib/features/goals/domain/entities/group_goal.dart",
              "lib/features/goals/domain/entities/goal_membership.dart",
              "lib/features/goals/domain/entities/goal_progress.dart",
              "lib/features/goals/domain/repositories/goals_repository.dart",
              "lib/features/goals/domain/usecases/get_user_goals_usecase.dart",
              "lib/features/goals/domain/usecases/get_goal_details_usecase.dart",
              "lib/features/goals/domain/usecases/create_goal_usecase.dart",
              "lib/features/goals/domain/usecases/invite_user_usecase.dart",
              "lib/features/goals/domain/usecases/join_goal_usecase.dart",
              "lib/features/goals/domain/usecases/leave_goal_usecase.dart",
              "lib/features/goals/domain/usecases/get_goal_progress_usecase.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-data",
            "title": "Implement goals data layer",
            "description": "Create remote datasource, models, and repository implementation",
            "filesToCreate": [
              "lib/features/goals/data/datasources/goals_remote_datasource.dart",
              "lib/features/goals/data/repositories/goals_repository_impl.dart",
              "lib/features/goals/data/models/group_goal_model.dart",
              "lib/features/goals/data/models/goal_membership_model.dart",
              "lib/features/goals/data/models/goal_progress_model.dart",
              "lib/features/goals/data/models/create_goal_request.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-state",
            "title": "Create goals state management",
            "description": "Implement goals provider and goal detail provider with lists and progress states",
            "filesToCreate": [
              "lib/features/goals/presentation/providers/goals_provider.dart",
              "lib/features/goals/presentation/providers/goals_state.dart",
              "lib/features/goals/presentation/providers/goal_detail_provider.dart"
            ],
            "priority": 3,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-widgets",
            "title": "Build goals UI widgets",
            "description": "Create goal cards, progress indicators, member lists, leaderboard items, and forms",
            "filesToCreate": [
              "lib/features/goals/presentation/widgets/goal_card.dart",
              "lib/features/goals/presentation/widgets/goal_progress_card.dart",
              "lib/features/goals/presentation/widgets/member_list_item.dart",
              "lib/features/goals/presentation/widgets/leaderboard_item.dart",
              "lib/features/goals/presentation/widgets/goal_form.dart",
              "lib/features/goals/presentation/widgets/invite_member_dialog.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-goals-pages",
            "title": "Build goals pages",
            "description": "Create goals list, detail, create, invitations, and leaderboard pages",
            "filesToCreate": [
              "lib/features/goals/presentation/pages/goals_list_page.dart",
              "lib/features/goals/presentation/pages/goal_detail_page.dart",
              "lib/features/goals/presentation/pages/create_goal_page.dart",
              "lib/features/goals/presentation/pages/goal_invitations_page.dart",
              "lib/features/goals/presentation/pages/goal_leaderboard_page.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-native-integration",
        "title": "Native Health API Integration",
        "description": "Integrate with HealthKit (iOS) and Google Fit/Health Connect (Android) for step data synchronization",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "pubspec.yaml"
        ],
        "filesToCreate": [
          "lib/features/health/data/datasources/health_datasource.dart",
          "lib/features/health/data/repositories/health_repository_impl.dart",
          "lib/features/health/data/models/health_data_point.dart",
          "lib/features/health/domain/entities/health_step_data.dart",
          "lib/features/health/domain/repositories/health_repository.dart",
          "lib/features/health/domain/usecases/get_today_steps_health_usecase.dart",
          "lib/features/health/domain/usecases/get_step_history_usecase.dart",
          "lib/features/health/domain/usecases/request_permissions_usecase.dart",
          "lib/features/health/domain/usecases/check_permissions_usecase.dart",
          "lib/features/health/presentation/providers/health_provider.dart",
          "lib/features/health/presentation/providers/health_state.dart",
          "lib/features/health/presentation/pages/health_permissions_page.dart",
          "lib/features/health/presentation/widgets/permission_request_card.dart",
          "lib/features/health/presentation/widgets/sync_status_indicator.dart",
          "lib/core/services/background_sync_service.dart",
          "lib/core/services/step_sync_service.dart"
        ],
        "filesToRead": [
          "lib/core/platform/health_permissions.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-platform-config",
          "epic-dashboard",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Uses health package for cross-platform support",
          "Background fetch for iOS",
          "WorkManager pattern for Android"
        ],
        "stories": [
          {
            "id": "story-health-domain",
            "title": "Create health domain layer",
            "description": "Define health step data entities, repository interface, and permission use cases",
            "filesToCreate": [
              "lib/features/health/domain/entities/health_step_data.dart",
              "lib/features/health/domain/repositories/health_repository.dart",
              "lib/features/health/domain/usecases/get_today_steps_health_usecase.dart",
              "lib/features/health/domain/usecases/get_step_history_usecase.dart",
              "lib/features/health/domain/usecases/request_permissions_usecase.dart",
              "lib/features/health/domain/usecases/check_permissions_usecase.dart"
            ],
            "priority": 1,
            "complexity": "moderate"
          },
          {
            "id": "story-health-data",
            "title": "Implement health data layer",
            "description": "Create health datasource using health package, models, and repository with platform-specific handling",
            "filesToCreate": [
              "lib/features/health/data/datasources/health_datasource.dart",
              "lib/features/health/data/repositories/health_repository_impl.dart",
              "lib/features/health/data/models/health_data_point.dart"
            ],
            "priority": 2,
            "complexity": "complex"
          },
          {
            "id": "story-health-sync",
            "title": "Implement background sync services",
            "description": "Create background sync service for periodic step data sync and step sync service for API upload",
            "filesToCreate": [
              "lib/core/services/background_sync_service.dart",
              "lib/core/services/step_sync_service.dart"
            ],
            "priority": 3,
            "complexity": "complex"
          },
          {
            "id": "story-health-state",
            "title": "Create health state management",
            "description": "Implement health provider with permission states and sync status",
            "filesToCreate": [
              "lib/features/health/presentation/providers/health_provider.dart",
              "lib/features/health/presentation/providers/health_state.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-health-ui",
            "title": "Build health permissions UI",
            "description": "Create permissions page, request cards, and sync status indicators",
            "filesToCreate": [
              "lib/features/health/presentation/pages/health_permissions_page.dart",
              "lib/features/health/presentation/widgets/permission_request_card.dart",
              "lib/features/health/presentation/widgets/sync_status_indicator.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-realtime-client",
        "title": "Real-Time WebSocket Client",
        "description": "Implement WebSocket client for real-time step updates, goal progress, and push notifications",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "pubspec.yaml",
          "lib/features/steps/presentation/providers/steps_provider.dart",
          "lib/features/goals/presentation/providers/goal_detail_provider.dart"
        ],
        "filesToCreate": [
          "lib/core/realtime/socket_client.dart",
          "lib/core/realtime/socket_events.dart",
          "lib/core/realtime/socket_state.dart",
          "lib/core/realtime/reconnection_strategy.dart",
          "lib/core/realtime/event_handlers/steps_event_handler.dart",
          "lib/core/realtime/event_handlers/goals_event_handler.dart",
          "lib/core/realtime/event_handlers/sharing_event_handler.dart",
          "lib/core/notifications/notification_service.dart",
          "lib/core/notifications/notification_channels.dart",
          "lib/core/notifications/push_notification_handler.dart",
          "lib/features/notifications/presentation/providers/notification_provider.dart",
          "lib/features/notifications/presentation/pages/notifications_page.dart",
          "lib/features/notifications/presentation/widgets/notification_item.dart",
          "lib/features/notifications/presentation/widgets/notification_badge.dart"
        ],
        "filesToRead": [
          "lib/core/storage/secure_storage_service.dart",
          "project-app-pasos-backend/src/socket/types.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-auth-ui",
          "epic-dashboard",
          "epic-sharing-ui",
          "epic-goals-ui",
          "epic-flutter-foundation",
          "epic-dashboard",
          "epic-goals-ui"
        ],
        "executionOrder": 6,
        "followsPatterns": [
          "Uses web_socket_channel for WebSocket",
          "Firebase messaging for push notifications",
          "Exponential backoff for reconnection"
        ],
        "stories": [
          {
            "id": "story-realtime-socket",
            "title": "Create WebSocket client",
            "description": "Implement socket client with connection management, authentication, and reconnection strategy",
            "filesToCreate": [
              "lib/core/realtime/socket_client.dart",
              "lib/core/realtime/socket_events.dart",
              "lib/core/realtime/socket_state.dart",
              "lib/core/realtime/reconnection_strategy.dart"
            ],
            "priority": 1,
            "complexity": "complex"
          },
          {
            "id": "story-realtime-handlers",
            "title": "Implement event handlers",
            "description": "Create handlers for steps-updated, goal-progress, and sharing events",
            "filesToCreate": [
              "lib/core/realtime/event_handlers/steps_event_handler.dart",
              "lib/core/realtime/event_handlers/goals_event_handler.dart",
              "lib/core/realtime/event_handlers/sharing_event_handler.dart"
            ],
            "priority": 2,
            "complexity": "moderate"
          },
          {
            "id": "story-realtime-notifications",
            "title": "Setup push notifications",
            "description": "Implement notification service with Firebase messaging and local notifications",
            "filesToModify": [
              "pubspec.yaml"
            ],
            "filesToCreate": [
              "lib/core/notifications/notification_service.dart",
              "lib/core/notifications/notification_channels.dart",
              "lib/core/notifications/push_notification_handler.dart"
            ],
            "priority": 3,
            "complexity": "complex"
          },
          {
            "id": "story-realtime-ui",
            "title": "Build notifications UI",
            "description": "Create notifications page, items, badges, and integrate with providers",
            "filesToCreate": [
              "lib/features/notifications/presentation/providers/notification_provider.dart",
              "lib/features/notifications/presentation/pages/notifications_page.dart",
              "lib/features/notifications/presentation/widgets/notification_item.dart",
              "lib/features/notifications/presentation/widgets/notification_badge.dart"
            ],
            "priority": 4,
            "complexity": "moderate"
          },
          {
            "id": "story-realtime-integration",
            "title": "Integrate real-time with existing features",
            "description": "Connect socket events to steps, goals, and sharing providers for live updates",
            "filesToModify": [
              "lib/features/steps/presentation/providers/steps_provider.dart",
              "lib/features/goals/presentation/providers/goal_detail_provider.dart"
            ],
            "priority": 5,
            "complexity": "moderate"
          }
        ],
        "repoType": "frontend"
      }
    ]
  }
}