{
  "_metadata": {
    "agentType": "planning",
    "taskId": "09fb1502f00abc4638c73758",
    "timestamp": "2026-01-23T15:50:02.890Z",
    "phase": "planning",
    "savedAt": "2026-01-23T15:50:02.890Z",
    "version": "1.0"
  },
  "data": {
    "taskTitle": "fnn121",
    "taskDescription": "Descripción de tareas para completar el frontend en Flutter\n\nCompletar los 9 epics del frontend de la aplicación \"Pasos\" (contador de pasos social) usando Flutter.\n\n================================================================================\n\nCONTEXTO\n\n================================================================================\n\nEl backend ya está completo en: project-app-pasos-backend\n\nEl frontend debe ir en: project-app-pasos-frontend-flutter (crear nueva estructura)\n\nUsar Flutter para aplicación móvil nativa multiplataforma (iOS/Android)\n\n================================================================================\n\nEPICS A IMPLEMENTAR\n\n================================================================================\n\nFLUTTER FOUNDATION\n\nSetup de Flutter + estructura del proyecto\n\nConfiguración de dependencias base (provider/bloc, dio, etc.)\n\nPLATFORM CONFIG\n\nConfiguración para iOS/Android\n\nPermisos para Health APIs (HealthKit/Google Fit)\n\nConfiguración de AndroidManifest.xml y Info.plist\n\nUI FOUNDATION\n\nSistema de diseño con Material Design 3\n\nRouting y navegación (go_router)\n\nTema oscuro/claro (ThemeData)\n\nWidgets reutilizables\n\nAUTH UI\n\nPantallas de login, registro y recuperación de contraseña\n\nGestión de estado de autenticación\n\nAlmacenamiento seguro de tokens (flutter_secure_storage)\n\nDASHBOARD\n\nVista principal con contador de pasos\n\nHistorial de actividad\n\nGráficos (fl_chart o charts_flutter)\n\nPull-to-refresh\n\nSHARING UI\n\nLista de amigos\n\nGestión de compartir datos con amigos\n\nSolicitudes de amistad\n\nVista de actividad de amigos\n\nGOALS UI\n\nGrupos y metas compartidas\n\nCreación y edición de metas\n\nProgreso de grupos\n\nRankings\n\nNATIVE INTEGRATION\n\nIntegración con podómetro nativo usando health package\n\nLectura de pasos desde HealthKit (iOS)\n\nLectura de pasos desde Google Fit/Health Connect (Android)\n\nBackground sync de datos\n\nREAL-TIME CLIENT\n\nIntegración WebSocket con web_socket_channel\n\nActualizaciones en tiempo real\n\nNotificaciones push (firebase_messaging)\n\nManejo de reconexión",
    "epicsCount": 9,
    "epics": [
      {
        "id": "epic-flutter-foundation",
        "title": "Flutter Project Foundation and Dependencies",
        "description": "Set up Flutter project structure, add required dependencies, configure project-wide settings, and establish feature module architecture",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "pubspec.yaml",
          "lib/main.dart",
          "lib/core/di/injection_container.dart",
          "lib/core/di/modules/network_module.dart",
          "lib/core/config/environment.dart",
          "analysis_options.yaml"
        ],
        "filesToCreate": [
          "lib/core/router/app_router.dart",
          "lib/core/router/routes.dart",
          "lib/core/constants/api_endpoints.dart",
          "lib/core/constants/storage_keys.dart",
          "lib/core/network/api_client.dart",
          "lib/core/network/auth_interceptor.dart",
          "lib/core/network/connectivity_interceptor.dart",
          "lib/core/di/modules/router_module.dart",
          "lib/core/di/modules/bloc_module.dart",
          "lib/app.dart"
        ],
        "filesToRead": [
          "lib/core/di/injection_container.dart",
          "lib/core/di/modules/network_module.dart",
          "lib/core/config/environment.dart",
          "pubspec.yaml"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [],
        "executionOrder": 1,
        "followsPatterns": [
          "Uses existing DI pattern with get_it",
          "Follows abstract final class module pattern",
          "Uses Environment configuration pattern"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-platform-config",
        "title": "iOS and Android Platform Configuration",
        "description": "Configure platform-specific settings for iOS (HealthKit) and Android (Google Fit/Health Connect), set up required permissions, entitlements, and manifest configurations",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "ios/Runner/Info.plist",
          "ios/Runner.xcodeproj/project.pbxproj",
          "android/app/src/main/AndroidManifest.xml",
          "android/app/build.gradle.kts",
          "android/app/src/main/kotlin/com/example/workspace/MainActivity.kt"
        ],
        "filesToCreate": [
          "ios/Runner/Runner.entitlements",
          "android/app/src/main/res/values/strings.xml"
        ],
        "filesToRead": [
          "ios/Runner/Info.plist",
          "android/app/src/main/AndroidManifest.xml"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation"
        ],
        "executionOrder": 1,
        "followsPatterns": [
          "Standard iOS entitlements configuration",
          "Standard Android manifest permissions"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-ui-foundation",
        "title": "UI Foundation with Material Design 3",
        "description": "Implement design system with Material Design 3 theming, light/dark mode support, reusable widget library, and navigation infrastructure using go_router",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/main.dart",
          "lib/app.dart",
          "lib/core/router/app_router.dart"
        ],
        "filesToCreate": [
          "lib/core/theme/app_theme.dart",
          "lib/core/theme/app_colors.dart",
          "lib/core/theme/app_typography.dart",
          "lib/core/theme/app_spacing.dart",
          "lib/shared/widgets/app_scaffold.dart",
          "lib/shared/widgets/app_button.dart",
          "lib/shared/widgets/app_text_field.dart",
          "lib/shared/widgets/app_card.dart",
          "lib/shared/widgets/app_loading.dart",
          "lib/shared/widgets/app_error.dart",
          "lib/shared/widgets/app_empty_state.dart",
          "lib/shared/widgets/step_counter_display.dart",
          "lib/shared/widgets/progress_ring.dart",
          "lib/shared/widgets/stat_card.dart",
          "lib/core/di/modules/theme_module.dart"
        ],
        "filesToRead": [
          "lib/main.dart",
          "lib/core/di/injection_container.dart"
        ],
        "estimatedComplexity": "moderate",
        "dependencies": [
          "epic-flutter-foundation",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "ThemeData configuration pattern",
          "Reusable widget composition"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-auth-ui",
        "title": "Authentication Feature with Login, Register, and Password Recovery",
        "description": "Implement complete authentication flow including login, registration, password recovery screens, auth state management with BLoC, secure token storage, and auto-login functionality",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/routes.dart",
          "lib/core/network/auth_interceptor.dart"
        ],
        "filesToCreate": [
          "lib/features/auth/data/datasources/auth_remote_datasource.dart",
          "lib/features/auth/data/datasources/auth_local_datasource.dart",
          "lib/features/auth/data/models/user_model.dart",
          "lib/features/auth/data/models/auth_tokens_model.dart",
          "lib/features/auth/data/repositories/auth_repository_impl.dart",
          "lib/features/auth/domain/entities/user.dart",
          "lib/features/auth/domain/entities/auth_tokens.dart",
          "lib/features/auth/domain/repositories/auth_repository.dart",
          "lib/features/auth/domain/usecases/login_usecase.dart",
          "lib/features/auth/domain/usecases/register_usecase.dart",
          "lib/features/auth/domain/usecases/logout_usecase.dart",
          "lib/features/auth/domain/usecases/get_current_user_usecase.dart",
          "lib/features/auth/domain/usecases/refresh_token_usecase.dart",
          "lib/features/auth/presentation/bloc/auth_bloc.dart",
          "lib/features/auth/presentation/bloc/auth_event.dart",
          "lib/features/auth/presentation/bloc/auth_state.dart",
          "lib/features/auth/presentation/pages/login_page.dart",
          "lib/features/auth/presentation/pages/register_page.dart",
          "lib/features/auth/presentation/pages/forgot_password_page.dart",
          "lib/features/auth/presentation/widgets/auth_form_field.dart",
          "lib/features/auth/presentation/widgets/social_login_buttons.dart",
          "lib/core/di/modules/auth_module.dart"
        ],
        "filesToRead": [
          "lib/core/utils/validators.dart",
          "lib/core/errors/failure.dart",
          "lib/core/di/modules/storage_module.dart",
          "project-app-pasos-backend/src/routes/auth.routes.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-ui-foundation",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture layers",
          "BLoC pattern for state management",
          "Result pattern for error handling",
          "Secure storage for tokens"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-dashboard",
        "title": "Dashboard with Step Counter, History, and Statistics",
        "description": "Implement main dashboard view showing today's step count, weekly activity chart, hourly peaks visualization, and comprehensive statistics with pull-to-refresh functionality",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/routes.dart"
        ],
        "filesToCreate": [
          "lib/features/steps/data/datasources/steps_remote_datasource.dart",
          "lib/features/steps/data/models/step_record_model.dart",
          "lib/features/steps/data/models/daily_steps_model.dart",
          "lib/features/steps/data/models/weekly_trend_model.dart",
          "lib/features/steps/data/models/hourly_peak_model.dart",
          "lib/features/steps/data/models/step_stats_model.dart",
          "lib/features/steps/data/repositories/steps_repository_impl.dart",
          "lib/features/steps/domain/entities/step_record.dart",
          "lib/features/steps/domain/entities/daily_steps.dart",
          "lib/features/steps/domain/entities/weekly_trend.dart",
          "lib/features/steps/domain/entities/hourly_peak.dart",
          "lib/features/steps/domain/entities/step_stats.dart",
          "lib/features/steps/domain/repositories/steps_repository.dart",
          "lib/features/steps/domain/usecases/get_today_steps_usecase.dart",
          "lib/features/steps/domain/usecases/get_weekly_trend_usecase.dart",
          "lib/features/steps/domain/usecases/get_hourly_peaks_usecase.dart",
          "lib/features/steps/domain/usecases/get_stats_usecase.dart",
          "lib/features/steps/domain/usecases/record_steps_usecase.dart",
          "lib/features/steps/presentation/bloc/steps_bloc.dart",
          "lib/features/steps/presentation/bloc/steps_event.dart",
          "lib/features/steps/presentation/bloc/steps_state.dart",
          "lib/features/steps/presentation/pages/dashboard_page.dart",
          "lib/features/steps/presentation/pages/history_page.dart",
          "lib/features/steps/presentation/pages/stats_page.dart",
          "lib/features/steps/presentation/widgets/today_steps_card.dart",
          "lib/features/steps/presentation/widgets/weekly_chart.dart",
          "lib/features/steps/presentation/widgets/hourly_chart.dart",
          "lib/features/steps/presentation/widgets/stats_grid.dart",
          "lib/core/di/modules/steps_module.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/steps.routes.ts",
          "project-app-pasos-backend/src/models/Step.ts",
          "lib/shared/widgets/stat_card.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-auth-ui",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture layers",
          "fl_chart for visualizations",
          "Pull-to-refresh pattern"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-sharing-ui",
        "title": "Social Sharing Feature with Friends Management",
        "description": "Implement friend management system including friend list, sending/accepting/rejecting friend requests, viewing friends' activity, and shared step statistics",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/routes.dart"
        ],
        "filesToCreate": [
          "lib/features/sharing/data/datasources/sharing_remote_datasource.dart",
          "lib/features/sharing/data/models/sharing_relationship_model.dart",
          "lib/features/sharing/data/models/friend_model.dart",
          "lib/features/sharing/data/models/friend_stats_model.dart",
          "lib/features/sharing/data/repositories/sharing_repository_impl.dart",
          "lib/features/sharing/domain/entities/sharing_relationship.dart",
          "lib/features/sharing/domain/entities/friend.dart",
          "lib/features/sharing/domain/entities/friend_stats.dart",
          "lib/features/sharing/domain/repositories/sharing_repository.dart",
          "lib/features/sharing/domain/usecases/get_friends_usecase.dart",
          "lib/features/sharing/domain/usecases/get_pending_requests_usecase.dart",
          "lib/features/sharing/domain/usecases/send_friend_request_usecase.dart",
          "lib/features/sharing/domain/usecases/accept_request_usecase.dart",
          "lib/features/sharing/domain/usecases/reject_request_usecase.dart",
          "lib/features/sharing/domain/usecases/remove_friend_usecase.dart",
          "lib/features/sharing/domain/usecases/get_friend_stats_usecase.dart",
          "lib/features/sharing/domain/usecases/search_users_usecase.dart",
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/sharing/presentation/bloc/sharing_event.dart",
          "lib/features/sharing/presentation/bloc/sharing_state.dart",
          "lib/features/sharing/presentation/bloc/friend_search_bloc.dart",
          "lib/features/sharing/presentation/pages/friends_page.dart",
          "lib/features/sharing/presentation/pages/friend_requests_page.dart",
          "lib/features/sharing/presentation/pages/friend_detail_page.dart",
          "lib/features/sharing/presentation/pages/add_friend_page.dart",
          "lib/features/sharing/presentation/widgets/friend_list_tile.dart",
          "lib/features/sharing/presentation/widgets/friend_request_card.dart",
          "lib/features/sharing/presentation/widgets/user_search_result.dart",
          "lib/features/sharing/presentation/widgets/friend_activity_card.dart",
          "lib/core/di/modules/sharing_module.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/sharing.routes.ts",
          "project-app-pasos-backend/src/routes/users.routes.ts",
          "project-app-pasos-backend/src/models/SharingRelationship.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-dashboard",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture layers",
          "BLoC for search debounce",
          "Relationship status handling"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-goals-ui",
        "title": "Group Goals Feature with Progress Tracking",
        "description": "Implement group goals management including goal creation, member invitations, progress tracking with rankings, and goal participation features",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "lib/core/router/app_router.dart",
          "lib/core/router/routes.dart"
        ],
        "filesToCreate": [
          "lib/features/goals/data/datasources/goals_remote_datasource.dart",
          "lib/features/goals/data/models/group_goal_model.dart",
          "lib/features/goals/data/models/goal_member_model.dart",
          "lib/features/goals/data/models/goal_progress_model.dart",
          "lib/features/goals/data/models/member_contribution_model.dart",
          "lib/features/goals/data/repositories/goals_repository_impl.dart",
          "lib/features/goals/domain/entities/group_goal.dart",
          "lib/features/goals/domain/entities/goal_member.dart",
          "lib/features/goals/domain/entities/goal_progress.dart",
          "lib/features/goals/domain/entities/member_contribution.dart",
          "lib/features/goals/domain/repositories/goals_repository.dart",
          "lib/features/goals/domain/usecases/get_user_goals_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_details_usecase.dart",
          "lib/features/goals/domain/usecases/create_goal_usecase.dart",
          "lib/features/goals/domain/usecases/invite_to_goal_usecase.dart",
          "lib/features/goals/domain/usecases/join_goal_usecase.dart",
          "lib/features/goals/domain/usecases/leave_goal_usecase.dart",
          "lib/features/goals/domain/usecases/get_goal_progress_usecase.dart",
          "lib/features/goals/presentation/bloc/goals_bloc.dart",
          "lib/features/goals/presentation/bloc/goals_event.dart",
          "lib/features/goals/presentation/bloc/goals_state.dart",
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart",
          "lib/features/goals/presentation/pages/goals_list_page.dart",
          "lib/features/goals/presentation/pages/goal_detail_page.dart",
          "lib/features/goals/presentation/pages/create_goal_page.dart",
          "lib/features/goals/presentation/pages/invite_members_page.dart",
          "lib/features/goals/presentation/pages/goal_invitations_page.dart",
          "lib/features/goals/presentation/widgets/goal_card.dart",
          "lib/features/goals/presentation/widgets/goal_progress_ring.dart",
          "lib/features/goals/presentation/widgets/member_ranking_list.dart",
          "lib/features/goals/presentation/widgets/contribution_chart.dart",
          "lib/features/goals/presentation/widgets/goal_date_picker.dart",
          "lib/core/di/modules/goals_module.dart"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/routes/goals.routes.ts",
          "project-app-pasos-backend/src/models/GroupGoal.ts",
          "project-app-pasos-backend/src/models/GroupGoalMembership.ts"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-sharing-ui",
          "epic-flutter-foundation"
        ],
        "executionOrder": 2,
        "followsPatterns": [
          "Clean Architecture layers",
          "Date range validation",
          "Progress calculation patterns"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-native-integration",
        "title": "Native Health API Integration for Step Tracking",
        "description": "Implement native pedometer integration using health package for reading steps from HealthKit (iOS) and Google Fit/Health Connect (Android), including background sync and permission handling",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "pubspec.yaml",
          "lib/features/steps/presentation/bloc/steps_bloc.dart",
          "lib/features/steps/presentation/bloc/steps_event.dart",
          "lib/features/steps/presentation/bloc/steps_state.dart",
          "lib/features/steps/domain/repositories/steps_repository.dart",
          "lib/features/steps/data/repositories/steps_repository_impl.dart"
        ],
        "filesToCreate": [
          "lib/features/health/data/datasources/health_datasource.dart",
          "lib/features/health/data/services/health_service.dart",
          "lib/features/health/data/services/background_sync_service.dart",
          "lib/features/health/domain/repositories/health_repository.dart",
          "lib/features/health/domain/usecases/request_health_permissions_usecase.dart",
          "lib/features/health/domain/usecases/read_steps_usecase.dart",
          "lib/features/health/domain/usecases/sync_steps_usecase.dart",
          "lib/features/health/presentation/bloc/health_bloc.dart",
          "lib/features/health/presentation/bloc/health_event.dart",
          "lib/features/health/presentation/bloc/health_state.dart",
          "lib/features/health/presentation/pages/health_permissions_page.dart",
          "lib/features/health/presentation/widgets/permission_request_card.dart",
          "lib/features/health/presentation/widgets/sync_status_indicator.dart",
          "lib/core/di/modules/health_module.dart",
          "lib/core/services/background_service.dart"
        ],
        "filesToRead": [
          "ios/Runner/Info.plist",
          "android/app/src/main/AndroidManifest.xml",
          "lib/features/steps/data/datasources/steps_remote_datasource.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-platform-config",
          "epic-dashboard",
          "epic-flutter-foundation",
          "epic-dashboard"
        ],
        "executionOrder": 5,
        "followsPatterns": [
          "Health package integration",
          "Permission request flow",
          "Background workmanager pattern"
        ],
        "repoType": "frontend"
      },
      {
        "id": "epic-realtime-client",
        "title": "Real-Time Updates with WebSocket and Push Notifications",
        "description": "Implement WebSocket client for real-time step updates and goal progress, Firebase Cloud Messaging for push notifications, and connection state management with auto-reconnection",
        "targetRepository": "app-pasos-frontend-flutter",
        "affectedRepositories": [
          "app-pasos-frontend-flutter"
        ],
        "filesToModify": [
          "lib/core/di/injection_container.dart",
          "pubspec.yaml",
          "lib/features/steps/presentation/bloc/steps_bloc.dart",
          "lib/features/sharing/presentation/bloc/sharing_bloc.dart",
          "lib/features/goals/presentation/bloc/goals_bloc.dart",
          "lib/features/goals/presentation/bloc/goal_detail_bloc.dart",
          "android/app/build.gradle.kts",
          "ios/Runner/Info.plist"
        ],
        "filesToCreate": [
          "lib/core/realtime/socket_client.dart",
          "lib/core/realtime/socket_events.dart",
          "lib/core/realtime/socket_state.dart",
          "lib/core/realtime/reconnection_strategy.dart",
          "lib/core/notifications/notification_service.dart",
          "lib/core/notifications/notification_handler.dart",
          "lib/core/notifications/push_notification_bloc.dart",
          "lib/features/realtime/data/datasources/socket_datasource.dart",
          "lib/features/realtime/domain/repositories/realtime_repository.dart",
          "lib/features/realtime/domain/usecases/connect_socket_usecase.dart",
          "lib/features/realtime/domain/usecases/disconnect_socket_usecase.dart",
          "lib/features/realtime/domain/usecases/subscribe_steps_usecase.dart",
          "lib/features/realtime/domain/usecases/subscribe_goals_usecase.dart",
          "lib/features/realtime/presentation/bloc/realtime_bloc.dart",
          "lib/features/realtime/presentation/bloc/realtime_event.dart",
          "lib/features/realtime/presentation/bloc/realtime_state.dart",
          "lib/features/realtime/presentation/widgets/connection_status_badge.dart",
          "lib/core/di/modules/realtime_module.dart",
          "lib/core/di/modules/notification_module.dart",
          "android/app/google-services.json",
          "ios/Runner/GoogleService-Info.plist"
        ],
        "filesToRead": [
          "project-app-pasos-backend/src/socket/index.ts",
          "project-app-pasos-backend/src/socket/types.ts",
          "lib/core/network/api_client.dart"
        ],
        "estimatedComplexity": "complex",
        "dependencies": [
          "epic-goals-ui",
          "epic-flutter-foundation",
          "epic-platform-config",
          "epic-dashboard",
          "epic-sharing-ui",
          "epic-goals-ui"
        ],
        "executionOrder": 7,
        "followsPatterns": [
          "web_socket_channel integration",
          "Exponential backoff reconnection",
          "Firebase messaging setup"
        ],
        "repoType": "frontend"
      }
    ]
  }
}